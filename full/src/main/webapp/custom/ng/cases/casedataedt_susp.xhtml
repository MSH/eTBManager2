<?xml version="1.0" encoding="UTF-8"?> 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:rich="http://richfaces.ajax4jsf.org/rich">

	<div class="form-content">
	<h2>#{messages['cases.suspectdata']}</h2>

	<table width="100%" style="border-collapse:collapse;">
	<tr><td colspan="2">
		<s:decorate template="/layout/editname.xhtml">
			<ui:define name="label">#{messages['Patient.name']}:</ui:define>
			<ui:param name="patientdata" value="#{tbcase.patient}" />
			<ui:param name="redasterisk" value="#{true}" />
		</s:decorate>
	</td></tr>
	<tr><td>
		<s:decorate template="/layout/edit.xhtml">
			<ui:define name="label">#{messages['TbCase.age']}:</ui:define>
            <ui:param name="redasterisk" value="#{true}" />
			<h:inputText id="edtage" value="#{tbcase.age}" style="width:80px;">
				<f:validateLongRange minimum="0" maximum="150"/>
			</h:inputText>
		</s:decorate>
	</td><td>
		<s:decorate template="/layout/edit.xhtml">
			<ui:define name="label">#{messages['Gender']}:</ui:define>
            <ui:param name="redasterisk" value="#{true}" />
			<h:selectOneMenu id="edtgender" value="#{tbcase.patient.gender}" 	>
				<s:selectItems value="#{genders}" var="it" label="#{messages[it.key]}" noSelectionLabel="-"/>
				<s:convertEnum />
			</h:selectOneMenu>
		</s:decorate>
	</td></tr>

    </table>
    </div>
   
	<div class="form-content">

	<h2>#{messages['cases.suspectnotifdata']}</h2>

	<table width="100%" style="border-collapse:collapse;">
	<tr><td style="padding-bottom:10px;">
		<s:decorate template="/layout/editfield.xhtml" >
			<ui:define name="label">#{messages['TbField.SOURCE_REFERRAL']}:</ui:define>
			<ui:param name="id" value="edtsr" />
			<ui:param name="field" value="#{tbcase.sourceReferral}" />
			<ui:param name="list" value="#{fieldsQuery.sourcesReferral}" />
		</s:decorate>

		<div class="paragraph"><b>#{messages['TbCase.notificationUnit']}</b></div>

		<s:decorate template="/custom/ng/layout/tbselection.xhtml" >
			<ui:param name="tbunitselection" value="#{caseEditingHome.tbunitselection}" />
            <ui:param name="redasterisk" value="true" />
			<ui:param name="idcbunits" value="cbnotifunit" />
			<ui:param name="required" value="true" />
		</s:decorate>

	</td></tr></table>
	</div>




    <!-- exams only for new suspects -->
    <s:fragment rendered="#{empty tbcase.id}">

	<div class="form-content">
		<h2>#{messages['cases.exammicroscopy']}</h2>
		<s:decorate template="templates/edtmicroscopy.xhtml" />
	</div>



	<div class="form-content">
		<h2>#{messages['cases.examxpert']}</h2>
		<s:decorate template="templates/edtxpert.xhtml" />
	</div>


	<div class="form-content">
		<h2>#{messages['cases.examculture']}</h2>
		<s:decorate template="templates/edtculture.xhtml" />
	</div>

    </s:fragment>

	<div class="form-content">
		<h2>#{messages['manag.hivreport']}</h2>

        <s:decorate template="/layout/edit.xhtml" >
            <ui:define name="label">#{messages['cases.details.result']}:</ui:define>
            <ui:param name="redasterisk" value="true" />
            <h:selectOneMenu id="hivresult" value="#{tbcase.hivPosition}" >
                <s:selectItems value="#{hivpositions_ng}" var="it" noSelectionLabel=" - " label="#{messages[it.key]}" />
                <s:convertEnum />
            </h:selectOneMenu>
        </s:decorate>

        <div id="hivdata" style="#{tbcase.hivPosition == 'POSITIVE' ? '' : 'display:none'}">
            <s:decorate template="/layout/edit.xhtml" id="hivdetaildec" >
                <ui:define name="label">#{messages['TbCase.resultdate']}:</ui:define>
                <ui:param name="redasterisk" value="true" />
                <h:selectOneMenu id="hivdetail" value="#{tbcase.hivPositionDetail}" >
                    <s:selectItems value="#{hivpositiondetails_ng}" var="it" noSelectionLabel=" - " label="#{messages[it.key]}" />
                    <s:convertEnum />
                </h:selectOneMenu>
            </s:decorate>
        </div>

        <rich:jQuery selector="#hivresult" query="change( function(){ hivStatusChanged(this, 'hivdata'); })" />
	</div>

<script type="text/javascript">
	<!--
	-->
	function examResultChanged(cb, elem, immediate) {
		if (cb.selectedIndex !== 0)
			jQuery('#'+ elem).slideDown(immediate?0:500)
		else jQuery('#' + elem).slideUp(immediate?0:500);
	}
    function hivStatusChanged(cb, elem, immediate) {
        if (cb.selectedIndex !== 1)
            jQuery('#'+ elem).slideUp(immediate?0:500)
        else {
            jQuery('#' + elem).slideDown(immediate ? 0 : 500);
        }
    }
	-->
</script>


</ui:composition>