<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                template="/layout/template_new.xhtml">

<ui:param name="title" value="#{messages['cases.edit']} - #{caseAZHome.rightCaseDetailsTitle} - #{messages[tbcase.classification.key]}" />
<ui:param name="topmenu" value="0" />
<ui:param name="left" value="0" />
<ui:param name="waitdlg" value="1" />
<ui:param name="labelstyle" value="width:150px" />

<ui:define name="content">
<h1>#{title}</h1>
	<h:outputText value="#{messages['cases.system.create']}: " style="font-weight:bold;"/>
	<h:outputText value="#{tbcase.systemDate}" converter="localeDateConverter" rendered="#{tbcase.systemDate != null}"/>
	<h:outputText value="#{messages['cases.date_unknown']}" rendered="#{tbcase.systemDate == null}"/>
	<h:outputText value=", #{tbcase.createUser!=null ? tbcase.createUser.name : messages['cases.user_unknown']}"/>
	<br/>
	<h:outputText value="#{messages['cases.system.edit']}: " style="font-weight:bold;"/>
	<h:outputText value="#{tbcase.editingDate}" converter="localeDateConverter" rendered="#{tbcase.editingDate != null}"/>
	<h:outputText value="#{messages['cases.date_unknown']}" rendered="#{tbcase.editingDate == null}"/>
	<h:outputText value=", #{tbcase.editingUser!=null ? tbcase.editingUser.name : messages['cases.user_unknown']}"/>
	<br/>
	<h:outputText value="#{messages['cases.system.lastaction']}: " style="font-weight:bold;"/>
	<h:outputText value="#{caseAZHome.lastTransaction!=null ? caseAZHome.lastTransaction.title : messages['admin.import.eidss.nextFT.undef']}"/>
	<br/>
	<h:outputText value="#{messages['Patient.caseNumber']}: " style="font-weight:bold;"/>
	#{tbcase.displayCaseNumber}
<h:form id="main" styleClass="form1">
	<s:fragment rendered="#{tbcase.open}">
		<ui:include src="casedataedt.xhtml" />
	</s:fragment>
	<s:fragment rendered="#{!tbcase.open}">
		<ui:include src="closecaseedt.xhtml" />
	</s:fragment>
	
	<s:fragment rendered="#{tbcase.notificationUnit == null and tbcase.legacyId!=null}">
		<ui:include src="medexam.xhtml" />
	</s:fragment>
	
	<div class="form-footer">
		<div style="float:right;">
			<span style="color:red;">*</span> #{messages['javax.faces.component.UIInput.REQUIRED']}
		</div>
		<a:commandLink action="#{caseAZHome.persist}" styleClass="button" reRender="main,messages" onclick="if (!disableButton(this)) return false;">
			<span>#{messages['form.save']}</span>
		</a:commandLink>
		<s:link view="#{tbcase.notificationUnit == null?'/cases/searchresult.xhtml':'/cases/casedata.xhtml'}" styleClass="button-alt" propagation="end">
			<f:param name="id" value="#{caseHome.id}" />
			<span>#{messages['form.cancel']}</span>
		</s:link>
	</div>

</h:form>

</ui:define>

</ui:composition>  
