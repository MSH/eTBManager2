<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                template="/layout/template_new.xhtml">

<ui:param name="title" value="#{messages['cases.newnotif']} - #{messages[tbcase.classification.key]}" />

<ui:param name="topmenu" value="0" />
<ui:param name="labelstyle" value="width:130px" />

<ui:param name="waitdlg" value="1" />

<ui:define name="left">
</ui:define>

<ui:define name="content">
<p/>
<a:form id="main">
<table style="width:780px;border-collapse:collapse;">
<tr><td>

	<s:decorate template="/layout/roundrect.xhtml" style="margin-bottom:10px;">
		<ui:param name="showheader" value="0" />
		<ui:param name="showfooter" value="0" />

		<div class="paragraph">DOTS FACILITY</div>
		<s:decorate template="/layout/tbselection.xhtml" style="margin-bottom:8px;">
			<ui:param name="tbunitselection" value="#{caseEditingHome.tbunitselection}" />
			<ui:param name="required" value="true" />
		</s:decorate>

		<s:decorate template="/layout/dateedit.xhtml">
    		<ui:define name="label">#{messages['TbCase.registrationDate']}:</ui:define>
    		<ui:param name="required" value="true" /> 
    		<ui:param name="datefield" value="#{tbcase.registrationDate}" /> 
		</s:decorate>
	
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbCase.registrationCode']}:</ui:define>
			<h:inputText id="edtscreening" value="#{tbcase.registrationCode}" style="width:100px;" required="true"/>
		</s:decorate>
	
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Patient.lastName']}:</ui:define>
			<h:inputText id="edtscreening" value="#{tbcase.patient.lastName}" style="width:100px;" />
		</s:decorate>
	
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Patient.middleName']}:</ui:define>
			<h:inputText id="edtscreening" value="#{tbcase.patient.middleName}" style="width:100px;" />
		</s:decorate>
	
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Patient.firstname']}:</ui:define>
			<h:inputText id="edtscreening" value="#{tbcase.patient.name}" style="width:100px;" />
		</s:decorate>
	
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbCase.age']}:</ui:define>
    		<h:inputText id="edtage" value="#{tbcase.age}" style="width:80px;" required="true">
    			<f:validateLongRange minimum="0" maximum="150"/>
    		</h:inputText>
		</s:decorate>

		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Gender']}:</ui:define>
    		<h:selectOneMenu value="#{tbcase.patient.gender}" required="true">
    			<s:selectItems value="#{genders}" var="it" label="#{messages[it.key]}" noSelectionLabel="-"/>
    			<s:convertEnum />
    		</h:selectOneMenu>
		</s:decorate>
	</s:decorate>

	<s:decorate template="/layout/roundrect.xhtml" style="margin-bottom:10px;">
		<ui:param name="showheader" value="0" />
		<ui:param name="showfooter" value="0" />
	
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">Street and No.:</ui:define>
			<h:inputText value="#{tbcase.notifAddress.address}" style="width:150px;" />
		</s:decorate>
		
		<s:decorate template="/layout/auselection.xhtml">
			<ui:param name="auselection" value="#{caseEditingHome.notifAdminUnit}" />
			<ui:param name="requiredLevel" value="#{defaultWorkspace.patientAddrRequiredLevels}" />
		</s:decorate>
	</s:decorate>
	
	<s:decorate template="/layout/roundrect.xhtml">
		<ui:param name="showheader" value="0" />
		<ui:param name="showfooter" value="0" />

		<div class="paragraph">HEALTH FACILITY</div>
		<s:decorate template="/layout/tbselection.xhtml" style="margin-bottom:8px;">
			<ui:param name="tbunitselection" value="#{caseEditingHome.tbunitselection}" />
			<ui:param name="required" value="true" />
		</s:decorate>
	</s:decorate>
</td></tr>


<tr><td align="right">
		<a:commandLink value="#{messages['form.ok']}" action="#{caseDataPHHome.saveNew}" styleClass="button" reRender="main"/>
		<s:link value="#{messages['form.cancel']}" view="/cases/index.xhtml" styleClass="button-alt" propagation="end" />
</td></tr>
</table>
<p/>
	<span style="color:red;">*</span> #{messages['javax.faces.component.UIInput.REQUIRED']}

</a:form>

</ui:define>

</ui:composition>  
