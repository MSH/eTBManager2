<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                xmlns:s="http://jboss.com/products/seam/taglib"
        >

<s:decorate template="/layout/edit.xhtml" rendered="#{not labselection.level1ReadOnly}">
	<ui:define name="label">#{messages['Laboratory']}:</ui:define>
	<h:selectOneMenu id="cbselau" value="#{labselection.adminUnitDefaultId}" required="#{required}" requiredMessage="#{messages['javax.faces.component.UIInput.REQUIRED']}">
		<f:selectItems value="#{labselection.adminUnitOptions}"/>
		<a:support event="onchange" ajaxSingle="true" reRender="cblabs" focus="cblab"/>
	</h:selectOneMenu>

	<h:panelGroup id="cblabs">
	<br/>
	<h:selectOneMenu id="cblab" value="#{labselection.laboratory}" required="#{required}" requiredMessage="#{messages['javax.faces.component.UIInput.REQUIRED']}">
        <s:selectItems value="#{labselection.options}" var="it" label="#{it.abbrevName} (#{it.name})" noSelectionLabel="-" />
      	<s:convertEntity/>
    </h:selectOneMenu>
    <h:message for="cblab" styleClass="error" />
	</h:panelGroup>

	<ui:insert />
</s:decorate>

</ui:composition>