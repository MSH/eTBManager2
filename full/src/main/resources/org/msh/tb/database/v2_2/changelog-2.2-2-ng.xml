<?xml version="1.0" encoding="UTF-8"?>
 

<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="2.2.2" author="rmemoria" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="sourcereferral_id" type="int"></column>
            <column name="otherSourceReferral" type="varchar(250)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.ng.2" author="rmemoria" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="occupation_id" type="int"></column>
            <column name="otherOccupation" type="varchar(250)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.ng.3" author="rmemoria" context="NG">
        <addColumn tableName="examxpert">
            <column name="reason_id" type="int"></column>
            <column name="otherReason" type="varchar(250)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.ng.4" author="rmemoria">
        <addColumn tableName="examxpert">
            <column name="discriminator" type="varchar(250)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.ng.5" author="msantos" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="hivPosition" type="int"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.ng.6" author="msantos" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="hivPositionDetail" type="int"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.NG.7" author="MSANTOS" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="maritalstatus_id" type="int"></column>
            <column name="otherMarital" type="varchar(250)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.NG.8" author="MSANTOS" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="intakeAntiTBDrugs" type="int"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.NG.9" author="MSANTOS" context="NG">
        <addColumn tableName="tbcaseng">
            <column name="intakeAntiTBDrugsDuration" type="int"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2.2.3" author="msantos" context="NG">
        <sql>
            ALTER TABLE examxpert
            DROP FOREIGN KEY `genex_lab_fk`;
            ALTER TABLE `examxpert`
            CHANGE COLUMN `laboratory_ID` `laboratory_ID` INT(11) NULL ;
            ALTER TABLE `examxpert`
            ADD CONSTRAINT `genex_lab_fk`
            FOREIGN KEY (`laboratory_ID`)
            REFERENCES `laboratory` (`id`)
            ON DELETE CASCADE
            ON UPDATE CASCADE
        </sql>
    </changeSet>

    <changeSet id="2.2.4" author="rmemoria" context="NG">
        <sql>
            update examxpert set discriminator='gen' where discriminator is null
        </sql>
    </changeSet>

</databaseChangeLog>