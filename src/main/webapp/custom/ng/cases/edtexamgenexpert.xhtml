<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.ajax4jsf.org/rich"
                xmlns:s="http://jboss.com/products/seam/taglib"
                template="/layout/template_new.xhtml">

    <ui:param name="title" value="#{messages['cases.examxpert']}" />
    <ui:param name="left" value="0" />
    <ui:param name="labelstyle" value="width:200px" />
    <ui:param name="topmenu" value="0" />
    <ui:param name="examTemplateWrapper" value="/custom/ng/cases/editlabexam-template.xhtml" />
    <ui:param name="examHome" value="#{xpertActions}" />
    <ui:param name="ctrlpre" value="xp" />

    <ui:define name="content">

    <s:decorate template="#{examTemplateWrapper}">

        <s:decorate template="/layout/dateedit.xhtml" >
            <ui:define name="label">#{messages['cases.exams.dateRelease']}:</ui:define>
            <ui:param name="edtid" value="dtrelease" />
            <ui:param name="required" value="false" />
            <ui:param name="future" value="false" />
            <ui:param name="datefield" value="#{xpertActions.instance.dateRelease}" />
            <ui:param name="edtid" value="xpdtrelease" />
        </s:decorate>

        <s:decorate template="/layout/edit.xhtml" >
            <ui:define name="label">#{messages['cases.details.result']}:
            </ui:define>
            <h:selectOneMenu id="xpres" value="#{xpertActions.instance.result}" required="true" onchange="examResultChanged(this)">
                <s:selectItems value="#{xpertActions.genexpertResults}" var="it" noSelectionLabel="-" label="#{messages[it.key]}" />
                <s:convertEnum />
            </h:selectOneMenu>
        </s:decorate>
        <rich:jQuery selector="#xpres" query="change( function(){ examResultChanged(this); })" />
        <rich:jQuery selector="#xpres" timing="onload" query="each( function(){ examResultChanged(this, true); })" />

        <div id="pnltbdet">
            <s:decorate template="/layout/edit.xhtml" >
                <ui:define name="label">#{messages['cases.details.result']}:
                    <s:span style="color:red;">*</s:span>
                </ui:define>
                <h:selectOneMenu id="xprifres" value="#{xpertActions.instance.rifResult}">
                    <s:selectItems value="#{xpertActions.rifResults}" var="it" noSelectionLabel="-" label="#{messages[it.key]}" />
                    <s:convertEnum />
                </h:selectOneMenu>
            </s:decorate>
        </div>

        <script type="text/javascript">
            <!--
            function examResultChanged(cb, immediate) {
                var s = cb.options[cb.selectedIndex].value;
                if (s=='TB_DETECTED')
                    jQuery('#pnltbdet').slideDown(immediate?0:500)
                else jQuery('#pnltbdet').slideUp(immediate?0:500);
            }
            -->
        </script>

    </s:decorate>
    </ui:define>

</ui:composition>  
