<?xml version="1.0" encoding="UTF-8"?> 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
 	  			xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:rich="http://richfaces.ajax4jsf.org/rich">

	<s:link value="#{messages['cases.details.newresult']}" view="/custom/ph/cases/edtmedexam.xhtml" style="float:right;" rendered="#{caseHome.canEdit}">
		<f:param name="id" value="#{tbcase.id}"/>
		<f:param name="examid" value="#{null}"/>
	</s:link>

	<h:outputText value="#{messages['cases.details.noresultfound']}" styleClass="warn" rendered="#{empty medicalExaminationHome.allResults}" />

	<h:dataTable value="#{medicalExaminationHome.allResults}" var="r" rendered="#{not empty medicalExaminationHome.allResults}" width="100%">
		<h:column>
	
		<s:decorate template="/layout/roundrect.xhtml" style="margin-right:10px;">
		<ui:define name="header">
			<div style="float:right;">
				<s:link value="#{messages['form.edit']}" view="/custom/ph/cases/edtmedexam.xhtml" propagation="none" style="margin-right:20px;">
					<f:param name="id" value="#{tbcase.id}"/>
					<f:param name="examid" value="#{r.id}"/>
				</s:link>
				<h:commandLink value="#{messages['form.remove']}" onclick="if (confirm('#{messages['form.confirm_remove']}')) remExamCulture(#{r.id}, #{examCultureHome.lastResult});return false;">
				</h:commandLink>
			</div>
			<b>#{messages['cases.details.date']}: </b> 
			<h:outputText value="#{r.date}" converter="localeDateConverter" />
		</ui:define>
		<ui:param name="showfooter" value="0" />

		<div><table width="99%" style="border-collapse:collapse;">
		<tr><td valign="top">
			<s:decorate template="/layout/display.xhtml">
				<ui:define name="label">#{messages['MedicalExamination.weight']}: </ui:define>
				#{r.weight} Kg
			</s:decorate>
		</td><td valign="top">
			<s:decorate template="/layout/display.xhtml">
				<ui:define name="label">#{messages['MedicalExamination.height']}: </ui:define>
				#{r.height} cm
			</s:decorate>
		</td></tr>
		<tr><td valign="top">
		    <s:decorate template="/layout/display.xhtml" >
    			<ui:define name="label">#{messages['MedicalExamination.heartRate']}:</ui:define>
    			#{r.heartRate} (per minute)
		    </s:decorate>
		</td><td valign="top">
		    <s:decorate template="/layout/display.xhtml" >
		    	<ui:define name="label">#{messages['MedicalExamination.respRateRest']}:</ui:define>
		    	#{r.respRateRest} (per minute)
		    </s:decorate>
		</td></tr>
		<tr><td valign="top">
    		<s:decorate template="/layout/display.xhtml" >
		    	<ui:define name="label">#{messages['MedicalExamination.bloodPression']}:</ui:define>
		    	#{r.bloodPressureMin} / #{r.bloodPressureMax} (mmHg)
		    </s:decorate>
		</td>
		<td valign="top">
    		<s:decorate template="/layout/display.xhtml" >
		    	<ui:define name="label">#{messages['MedicalExamination.temperature']}:</ui:define>
		    	#{r.temperature} (Celcius)
		    </s:decorate>
		</td></tr>
		<tr><td colspan="2">
    		<s:decorate template="/layout/display.xhtml" >
    			<ui:define name="label">#{messages['MedicalExamination.responsible']}:</ui:define>
    			#{r.responsible}
		    </s:decorate>
			<s:fragment rendered="#{not empty r.comments}">
			<s:decorate template="/layout/display.xhtml">
				<ui:define name="label">#{messages['global.comments']}: </ui:define>
				#{r.comments}
			</s:decorate>
			</s:fragment>
		</td></tr>
		</table></div>
		
		</s:decorate>
		<p/>

		</h:column>
	</h:dataTable>

</ui:composition>
