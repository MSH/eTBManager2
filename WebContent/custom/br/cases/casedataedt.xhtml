<?xml version="1.0" encoding="UTF-8"?> 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
 	  			xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:rich="http://richfaces.ajax4jsf.org/rich">

	<div class="form-content">
		<h2>#{messages['cases.patientdata']}</h2>
	<table width="99%" style="border-collapse:collapse;">
	<tr><td colspan="2">
	<s:decorate template="/layout/editname.xhtml">
    	<ui:define name="label">#{messages['Patient.name']}:</ui:define>
		<ui:param name="patientdata" value="#{tbcase.patient}" />
		<ui:param name="required" value="#{true}" />
		<ui:param name="fieldStyle" value="text-transform:uppercase;" />
	</s:decorate>
	
	</td></tr>
	<tr><td>
	
	<s:decorate template="/layout/edit.xhtml">
    	<ui:define name="label">#{messages['Patient.securityNumber']}:</ui:define>
		<h:inputText value="#{tbcase.patient.securityNumber}" style="width:120px;text-transform:uppercase;" maxlength="50"></h:inputText>
	</s:decorate>
	
	</td><td>

	<s:decorate template="/layout/edit.xhtml">
    	<ui:define name="label">#{messages['pt_BR.numsinan']}:</ui:define>
		<h:inputText value="#{tbcase.numSinan}" style="width:120px;text-transform:uppercase;" maxlength="50"></h:inputText>
	</s:decorate>

	</td></tr>
	<tr><td>
	
	<s:decorate template="/layout/edit.xhtml">
    	<ui:define name="label">#{messages['Gender']}:</ui:define>
    	<h:selectOneMenu id="cbgender" value="#{tbcase.patient.gender}" required="true">
    		<s:selectItems value="#{genders}" var="it" label="#{messages[it.key]}" noSelectionLabel="-"/>
    		<s:convertEnum />
    	</h:selectOneMenu>
	</s:decorate>
	<rich:jQuery selector="#cbgender" query="change( function(){ genderChange(this); })" />
	<rich:jQuery selector="#cbgender" timing="onload" query="each( function(){ genderChange(this); })" />
	
	</td></tr>
	
	<ui:include src="/layout/editbirthdate.xhtml" >
		<ui:param name="birthdaterequired" value="true" />
	</ui:include>
	
	<tr><td colspan="2">
	
	<s:decorate template="/layout/edit.xhtml">
    	<ui:define name="label">#{messages['Patient.motherName']}:</ui:define>
		<h:inputText value="#{tbcase.patient.motherName}" style="width:300px;text-transform:uppercase;" maxlength="100" required="true" />
	</s:decorate>
	
	</td></tr>
	<tr><td>
	
    <s:decorate template="/layout/edit.xhtml" >
    	<ui:define name="label">#{messages['Nationality']}:</ui:define>
    	<h:selectOneMenu id="nationality" value="#{tbcase.nationality}" >
    		<s:selectItems var="s" value="#{nationalities}" noSelectionLabel="-" label="#{messages[s.key]}"/>
    		<s:convertEnum />
    	</h:selectOneMenu>
    </s:decorate>
	<rich:jQuery selector="#nationality" query="change(function(){ nationalityChange(this, false); })" />
	<rich:jQuery selector="#nationality" timing="onload" query="each(function(){ nationalityChange(this, true); })"/>

	</td><td>

	<div id="countryPanel" >	
    <s:decorate template="/layout/edit.xhtml" >
    	<ui:define name="label">#{messages['pt_BR.country']}:</ui:define>
    	<h:inputText value="#{tbcase.country}" maxlength="100" style="width:120px;text-transform:uppercase;"/>
    </s:decorate>
    </div>
	
	</td></tr>

    
    <tr><td colspan="2">
    	<h2>#{messages['cases.details.addressnotif']}</h2>
    </td></tr>
    
    <tr><td colspan="2">
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.address']}:</ui:define>
    		<h:inputText value="#{tbcase.notifAddress.address}" style="width:300px;text-transform:uppercase;" required="true" maxlength="100"/>
    		#{messages['pt_BR.addressNumber']}: <h:inputText value="#{tbcase.notifAddressNumber}" style="width:80px;text-transform:uppercase;" maxlength="20" />
    	</s:decorate>
    	
    </td></tr>
    
    <tr><td colspan="2">
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.complement']}</ui:define>
    		<h:inputText value="#{tbcase.notifAddress.complement}" style="width:300px;text-transform:uppercase;" maxlength="100"/>
    	</s:decorate>

    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.district']}</ui:define>
    		<h:inputText value="#{tbcase.notifDistrict}" style="width:150px;text-transform:uppercase;" maxlength="100"/>
    	</s:decorate>
    </td></tr>

	<tr><td>
		<s:decorate template="/layout/auselection.xhtml">
			<ui:param name="auselection" value="#{caseEditingHome.notifAdminUnit}" />
			<ui:param name="requiredLevel" value="#{defaultWorkspace.patientAddrRequiredLevels}" />
		</s:decorate>
    </td></tr>

    <tr><td>
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.zipCode']}</ui:define>
    		<h:inputText value="#{tbcase.notifAddress.zipCode}" maxlength="8" />
    	</s:decorate>
    </td></tr>

    <tr><td colspan="2">
    	<s:fragment rendered="#{caseHome.managed}">
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:param name="labelstyle" value="width:400px;" />
    		<ui:define name="label">#{messages['TbCase.notifAddressChanged']}:</ui:define>
    		<h:selectOneMenu id="addrChanged" value="#{tbcase.notifAddressChanged}" >
    			<f:selectItem itemLabel="#{messages['global.no']}" itemValue="#{false}"/>
    			<f:selectItem itemLabel="#{messages['global.yes']}" itemValue="#{true}"/>
    		</h:selectOneMenu>
    	</s:decorate>
<rich:jQuery selector="#addrChanged" query="change(function(){ showCurrAddress(this); })" />
<rich:jQuery selector="#addrChanged" timing="onload" query="each(function(){ if (this.selectedIndex==0) jQuery('#curraddr').hide(); })" />
    	
    	<div id="curraddr" style="clear:both;">
    	<h2>#{messages['cases.details.addresscurr']}</h2>
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.address']}:</ui:define>
    		<h:inputText value="#{tbcase.currentAddress.address}" style="width:300px;margin-bottom:2px;" maxlength="100"/>
    		#{messages['pt_BR.addressNumber']}: <h:inputText value="#{tbcase.currAddressNumber}" style="width:80px;text-transform:uppercase;" maxlength="20"  />
    	</s:decorate>
   
	   	<s:decorate template="/layout/edit.xhtml"> 	
    		<ui:define name="label">#{messages['Address.complement']}</ui:define>
    		<h:inputText value="#{tbcase.currentAddress.complement}" style="width:300px" maxlength="100"/>
    	</s:decorate>

    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.district']}</ui:define>
    		<h:inputText value="#{tbcase.currDistrict}" style="width:150px;text-transform:uppercase;" maxlength="100"/>
    	</s:decorate>

    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.zipCode']}</ui:define>
    		<h:inputText value="#{tbcase.currentAddress.zipCode}" maxlength="8" />
    	</s:decorate>
    	
    	<table width="100%" style="border-collapse: collapse;">
		<tr><td>
			<s:decorate template="/layout/auselection.xhtml">
				<ui:param name="auselection" value="#{caseEditingHome.currentAdminUnit}" />
			</s:decorate>
    	</td></tr>
    	</table>
    	
    	</div>
    	</s:fragment>
    </td></tr>

	<tr><td>
    	<s:decorate id="phone" template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbCase.phoneNumber']}:</ui:define>
    		<s:decorate styleClass="label">
			<s:label value="DDD" styleClass="over" />
   			<h:inputText id="dddphone" value="#{tbcase.prefixPhone}" style="width:50px;margin-right:4px;text-transform:uppercase;" maxlength="3"/>
    		<h:inputText value="#{tbcase.phoneNumber}" maxlength="50" style="text-transform:uppercase;"/>
    		</s:decorate>
    	</s:decorate>	
		<rich:jQuery selector="#phone .label label" query="labelOver('over');" />
	</td><td>
    	<s:decorate id="mobile" template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbCase.mobileNumber']}:</ui:define>
    		<s:decorate styleClass="label"> 
			<s:label value="DDD" styleClass="over" />
   			<h:inputText id="dddmobile" value="#{tbcase.prefixMobile}" style="width:50px;margin-right:4px;text-transform:uppercase;" maxlength="3"/>
    		<h:inputText value="#{tbcase.mobileNumber}" maxlength="50" style="text-transform:uppercase;"/>
    		</s:decorate>
    	</s:decorate>	
		<rich:jQuery selector="#mobile .label label" query="labelOver('over');" />
    </td></tr>

    </table>
    </div>



	<div class="form-content">
		<h2>#{messages['cases.generaldata']}</h2>
	<table width="800px" style="border-collapse:collapse;">
	<tr><td style="padding-bottom:10px;" colspan="2">

	<div class="paragraph">#{messages['pt_BR.usOrigem']}</div>
	<s:decorate template="/layout/edit.xhtml">
    	<ui:define name="label">#{messages['form.name']}:</ui:define>
		<h:inputText value="#{tbcase.usOrigem}" style="width:250px;text-transform:uppercase;" maxlength="100" required="true"/>
	</s:decorate>
	<s:decorate template="/layout/auselection.xhtml">
		<ui:param name="auselection" value="#{caseDataBRHome.auselection}" />
		<ui:param name="requiredLevel" value="2" />
	</s:decorate>

	<div class="paragraph">#{messages['FilterHealthUnit.NOTIFICATION_UNIT']}</div>
	<s:decorate template="/layout/tbselection.xhtml" >
		<ui:param name="tbunitselection" value="#{caseEditingHome.tbunitselection}" />
		<ui:param name="required" value="true" />
	</s:decorate>

	</td></tr><tr><td colspan="2">

	<div id="divregdate">
    <s:decorate template="/layout/dateedit.xhtml" >
    	<ui:define name="label">#{messages['TbCase.registrationDate']}:</ui:define>
    	<ui:param name="datefield" value="#{tbcase.registrationDate}" /> 
		<ui:param name="required" value="true" />
		<ui:param name="future" value="false" />
		<ui:param name="edtid" value="edtregdate" />
    </s:decorate>
    </div>
    <div id="diagdate">
    <s:decorate template="/layout/dateedit.xhtml" >
    	<ui:define name="label">#{messages['TbCase.diagnosisDate']}:</ui:define>
    	<ui:param name="required" value="true" /> 
    	<ui:param name="datefield" value="#{tbcase.diagnosisDate}" /> 
    	<ui:param name="edtid" value="diagdateedt" />
    </s:decorate>
    </div>
    <rich:jQuery selector="#divregdate input" query="bind('keypress', function() { handleCaseDateChange();})" />

	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['PatientType']}:</ui:define>
   			<h:selectOneMenu id="patType" value="#{tbcase.patientType}" required="true">
    			<s:selectItems var="it" value="#{caseDataBRHome.getPatientTypesList(tbcase.classification)}" noSelectionLabel="-" label="#{caseDataBRHome.getClassificationLabel(tbcase.classification, it)}" />
    			<s:convertEnum />
    		</h:selectOneMenu>
	</s:decorate>

<rich:jQuery selector="#patType" query="change(function(){ patientTypeChange(this,false); })" />
<rich:jQuery selector="#patType" timing="onload" query="each(function(){ patientTypeChange(this,true); })" />

	<div id="patientTypeOther">
		<s:decorate template="/layout/edit.xhtml">
			<ui:define name="label">#{messages['TbCase.patientTypeOther']}:</ui:define>
    		<h:inputText value="#{tbcase.patientTypeOther}" style="width:200px;" maxlength="100" />
		</s:decorate>
	</div>
	<div id="divSchemaChanged" >
    	<s:decorate template="/layout/editfield.xhtml" >
    		<ui:define name="label">#{messages['TbField.SCHEMA_TYPES']}:</ui:define>
    		<ui:param name="id" value="schema" />
    		<ui:param name="field" value="#{tbcase.schemaChangeType}" />
    		<ui:param name="list" value="#{fieldsQuery.schemaTypes}" />
    	</s:decorate>
	</div>
	<div id="divFailure" >
		<s:decorate template="/layout/edit.xhtml">
			<ui:define name="label">#{messages['PatientType.FAILURE']}:</ui:define>
			<h:selectOneMenu value="#{tbcase.failureType}">
				<s:selectItems var="s" value="#{globalLists_br.failureTypes}" label="#{messages[s.key]}" noSelectionLabel="-" />
				<s:convertEnum />
			</h:selectOneMenu>
		</s:decorate>
	</div>

    <s:decorate template="/layout/editfield.xhtml" rendered="#{tbcase.classification=='NMT'}">
    	<ui:define name="label">#{messages['pt_BR.tipo_mnt']}:</ui:define>
    	<ui:param name="required" value="true" />
    	<ui:param name="id" value="mnt" />
    	<ui:param name="field" value="#{tbcase.microbacteriose}" />
    	<ui:param name="list" value="#{fieldsQuery.micobacterioses}" />
    </s:decorate>

 	<!--
    <s:decorate template="/layout/edit.xhtml" rendered="#{tbcase.classification=='DRTB'}">
    	<ui:define name="label">#{messages['DrugResistanceType']}:</ui:define>
    	<h:selectOneMenu value="#{tbcase.drugResistanceType}" >
    		<s:selectItems var="it" value="#{drugResistanceTypes}" noSelectionLabel="-" label="#{messages[it.key]}"/>
    		<s:convertEnum />
    	</h:selectOneMenu>
    </s:decorate> 
     -->
    
     <s:decorate template="/layout/display.xhtml" rendered="#{tbcase.classification=='DRTB'}">
		<ui:define name="label">#{messages['DrugResistanceType']}:</ui:define>
		<h:outputText value="#{messages[tbcase.drugResistanceType.key]}" rendered="#{not empty tbcase.drugResistanceType}"/>
		<h:outputText value="Cadastre o teste de sensibilidade para que o sistema possa identificar o #{messages['DrugResistanceType']}." rendered="#{empty tbcase.drugResistanceType}"/>
	</s:decorate>

		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['InfectionSite']}:</ui:define>
    		<h:selectOneMenu id="infectsite" value="#{tbcase.infectionSite}" required="true">
    			<s:selectItems var="it" value="#{infectionSites}" noSelectionLabel="-" label="#{messages[it.key]}" />
    			<s:convertEnum />
    		</h:selectOneMenu>
		</s:decorate>

	<div id="extrapul" style="clear:both;">
		<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbField.EXTRAPULMONARY_TYPES']}:</ui:define>
    		<h:selectOneMenu value="#{tbcase.extrapulmonaryType}" style="margin-right:4px;">
    			<s:selectItems var="it" value="#{fieldOptions.extrapulmonaryTypes}" noSelectionLabel="-" label="#{it}" />
    			<s:convertEntity />
    		</h:selectOneMenu>

    		<h:selectOneMenu value="#{tbcase.extrapulmonaryType2}">
    			<s:selectItems var="it" value="#{fieldOptions.extrapulmonaryTypes}" noSelectionLabel="-" label="#{it}" />
    			<s:convertEntity />
    		</h:selectOneMenu>
		</s:decorate>
	</div>

	<div id="pulmonary" style="clear:both;">
		<s:decorate template="/layout/edit.xhtml">
			<ui:param name="redasterisk" value="true" />
    		<ui:define name="label">#{messages['TbField.PULMONARY_TYPES']}:</ui:define>
    		<h:selectOneMenu id="cbpulmonary" value="#{tbcase.pulmonaryType}" style="margin-right:4px;">
    			<s:selectItems var="it" value="#{fieldOptions.pulmonaryTypes}" noSelectionLabel="-" label="#{it}" />
    			<s:convertEntity />
    		</h:selectOneMenu>
		</s:decorate>
	</div>
<rich:jQuery selector="#infectsite" query="change(function(){showExtrapulmonary(this); })" />
<rich:jQuery selector="#infectsite" timing="onload" query="each(function(){ showExtrapulmonary(this,true); })" />
<rich:jQuery selector="#tblcomorb" timing="onload" query="ready(function() {updateRows();})" />
<script type="text/javascript">
<!--
window.decSeparator = '#{timezones.decimalSeparator}';
function updateRows() {
	jQuery("#tblcomorb tr").removeClass("activerow");
	jQuery("#tblcomorb tr input[type='text']").hide();
	jQuery("#tblcomorb tr select").hide();
	jQuery("#tblcomorb tr:has(:checked) input[type='text']").show();
	jQuery("#tblcomorb tr:has(:checked) select").show();
	jQuery("#tblcomorb tr:has(:checked)").addClass("activerow");
}
function toggleDivPanel(chk, divname) {
	if (chk.checked)
		jQuery(divname).show();
	else jQuery(divname).hide();
}
function nationalityChange(cb, immediate) {
  if (cb.selectedIndex == 2)
	   jQuery('#countryPanel').show(immediate?0:500)
  else jQuery('#countryPanel').hide(immediate?0:500);
}

function patientTypeChange(cb, immediate) {
	var ldelay = (immediate?0:500);
	var s = cb.options[cb.selectedIndex].value;
  	bOther=((s=='OTHER') || (s=='NEW_SPECIAL'));
  	bFailure=(s=='FAILURE');
  	bSchemaChanged=(s=='SCHEMA_CHANGED');

	var val=jQuery('#patientTypeOther');
	if (bOther) val.show(ldelay); else val.hide(ldelay);
	val=jQuery('#divSchemaChanged');
	if (bSchemaChanged) val.show(ldelay); else val.hide(ldelay);
	val=jQuery('#divResistant');
	val=jQuery('#divFailure');
	if (bFailure) val.show(ldelay); else val.hide(ldelay);
}
function showExtrapulmonary(cb, immediate) {
  var ldelay = (immediate?0: 500);
  if (isExtrapulmonary(cb))
  	jQuery('#extrapul').show(ldelay);
  else jQuery('#extrapul').hide(ldelay);
  if (isPulmonary(cb)) 
	jQuery('#pulmonary').show(ldelay);
  else jQuery('#pulmonary').hide(ldelay);
}
function isExtrapulmonary(cb) {
  return ((cb.selectedIndex == 2) || (cb.selectedIndex == 3));
}
function isPulmonary(cb) {
  return ((cb.selectedIndex == 1) || (cb.selectedIndex == 3));
}
function showCurrAddress(cb) {
  if (cb.selectedIndex == 0)
  	   jQuery('#curraddr').hide(500);
  else jQuery('#curraddr').show(500);
}
function genderChange(cb) {
	var bVisible = (cb.options[cb.selectedIndex].value == 'FEMALE');
	var elem = jQuery('#div_pergnant');
	if (bVisible) elem.show(); else elem.hide();
}
-->
</script>
		
		</td></tr>
		<s:fragment rendered="#{!caseHome.managed}">
	<tr><td>		
		<script src="../js/util.js" type="text/javascript" />
    
    	<s:decorate template="/layout/edit.xhtml" >
    		<ui:define name="label">#{messages['MedicalExamination.weight']}:</ui:define>
    		<div id="edtweight">
    		<h:inputText value="#{medicalExaminationHome.instance.weight}" required="true" 
    			onkeypress="return numbersOnly(this,event);" onkeyup="updateBMI(this, event);"
    			style="width:80px;" />#{messages['MedicalExamination.weight.unit']}
    		</div>
    	</s:decorate>

		</td><td>
    
    	<s:decorate template="/layout/edit.xhtml" >
    		<ui:define name="label">#{messages['MedicalExamination.height']}:</ui:define>
    		<span id="edtheight">
    		<h:inputText value="#{medicalExaminationHome.instance.height}" style="width:80px;"
    			onkeypress="return numbersOnly(this,event);" onkeyup="updateBMI(this, event);"/>
    		#{messages['MedicalExamination.height.unit']}
    		</span>
    	</s:decorate>

		</td></tr>
		<tr><td>
			<s:decorate template="/layout/display.xhtml">
				<ui:define name="label">#{messages['MedicalExamination.BMI']}:</ui:define>
				<div id="divBMI">-</div>
			</s:decorate>
		</td></tr>
		</s:fragment>
		</table>
	</div>


	<ui:insert name="treatment" />
	<ui:insert name="exams" />

	<div class="form-content">
		<h2>#{messages['cases.prevtreat']}</h2>
		<table width="99%" style="border-collapse:collapse;"><tr><td>
		<s:decorate template="/layout/edit.xhtml">
			<ui:define name="label">
				#{messages['cases.prevtreat.numprev']}:
			</ui:define>
			<h:selectOneMenu value="#{prevTBTreatmentHome.numTreatments}">
				<f:selectItems value="#{prevTBTreatmentHome.numTreatmentsOptions}" required="true"/>
				<a:support event="onchange" ajaxSingle="true" reRender="prevtreats"/>
			</h:selectOneMenu>
		</s:decorate>

		<h:panelGroup id="prevtreats">
		<s:fragment rendered="#{prevTBTreatmentHome.numTreatments>0}">
		<table width="100%" class="table1">
			<tr>
				<th rowspan="2">#{messages['cases.prevtreat.num']}
				</th>
				<th rowspan="2">#{messages['cases.prevtreat.date']}
				</th>
				<th colspan="#{prevTBTreatmentHome.substances.size}">
					#{messages['cases.prevtreat.regs']}
				</th>
				<th rowspan="2">#{messages['PrevTBTreatment.outcome']}
				</th>
			</tr>
			<tr>
			<a:repeat value="#{prevTBTreatmentHome.substances}" var="s">
				<th>#{s.abbrevName}
				</th>
			</a:repeat>
			</tr>
		<a:repeat value="#{prevTBTreatmentHome.treatments}" var="it">
			<tr>
				<td class="colcb">#{it.index}
				</td>
				<td class="colcb">
					<s:validateAll>
						<h:selectOneMenu id="month" value="#{it.prevTBTreatment.month}" required="true">
							<f:selectItems value="#{months}"/>
						</h:selectOneMenu>
						<h:message for="month" styleClass="error"/>
						<h:selectOneMenu id="year" value="#{it.prevTBTreatment.year}" required="true">
							<f:selectItems value="#{years}"/>
						</h:selectOneMenu>
						<h:message for="year" styleClass="error"/>
					</s:validateAll>
				</td>
				<a:repeat value="#{it.items}" var="sub">
				<td class="colcb">
					<h:selectBooleanCheckbox value="#{sub.selected}" />
				</td>
				</a:repeat>
				<td class="colcb">
					<s:validateAll>
					<h:selectOneMenu id="oc" value="#{it.prevTBTreatment.outcome}" required="true">
						<s:selectItems var="v" value="#{globalLists_br.prevTBTreatmentOutcomes}" label="#{messages[v.key]}" noSelectionLabel="-" />
						<s:convertEnum />
					</h:selectOneMenu>
					</s:validateAll>
					<h:message for="oc" styleClass="error"/>
				</td>
			</tr>
		</a:repeat>
		</table>
		</s:fragment>
		</h:panelGroup>

    	<s:decorate template="/layout/edit.xhtml" >
    	<ui:define name="label">#{messages['TbField.RESISTANCE_TYPES']}:</ui:define>
    	<h:selectOneMenu value="#{tbcase.tipoResistencia}" required="true">
    		<s:selectItems var="it" value="#{globalLists_br.tiposResistencia}" noSelectionLabel="-" label="#{it.message}"/>
    		<s:convertEnum />
    	</h:selectOneMenu>
    	</s:decorate>

		</td></tr></table>
	</div>


	<div class="form-content">
		<h2>#{messages['cases.details.otherinfo']}</h2>
	<table width="99%" style="border-collapse:collapse;">
	<tr><td style="padding-bottom:10px;">

    <s:decorate template="/layout/editfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.SKINCOLOR']}:</ui:define>
    	<ui:param name="required" value="true" />
    	<ui:param name="id" value="skinColor" />
    	<ui:param name="field" value="#{tbcase.skinColor}" />
    	<ui:param name="list" value="#{fieldsQuery.skinColors}" />
    </s:decorate>
	
    <s:decorate template="/layout/editfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.POSITION']}:</ui:define>
    	<ui:param name="required" value="true" />
    	<ui:param name="id" value="position" />
    	<ui:param name="field" value="#{tbcase.position}" />
    	<ui:param name="list" value="#{fieldsQuery.positions}" />
    </s:decorate>

    <s:decorate template="/layout/editfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.EDUCATIONAL_DEGREE']}:</ui:define>
    	<ui:param name="required" value="true" />
    	<ui:param name="id" value="eduDegree" />
    	<ui:param name="field" value="#{tbcase.educationalDegree}" />
    	<ui:param name="list" value="#{fieldsQuery.educationalDegree}" />
    </s:decorate>

	<div id="div_pergnant">
    <s:decorate template="/layout/edit.xhtml" >
    	<ui:define name="label">#{messages['TbField.PREGNANCE_PERIOD']}:</ui:define>
    	<h:selectOneMenu value="#{tbcase.pregnancePeriod}">
    		<s:selectItems var="s" value="#{fieldsQuery.pregnancePeriod}" noSelectionLabel="-" label="#{s.name}"/>
    		<s:convertEntity />
    	</h:selectOneMenu>
    </s:decorate>
    </div>
    
    <s:fragment rendered="#{!caseHome.managed}">
	    <h2>#{messages['cases.comorbidities']}</h2>
		<div id="tblcomorb">
		<h:dataTable value="#{comorbidityHome.comorbidities}" var="it" styleClass="table1 small" rowClasses="lin1,lin2" width="100%">
			<h:column>
				<f:facet name="header">
					<h:outputText value="#{messages['form.name']}" styleClass="collh"/>
				</f:facet>
				<h:selectBooleanCheckbox value="#{it.selected}" onclick="updateRows();"/>
				#{it.item.comorbidity.name}
			</h:column>
			
			<h:column >
				<f:facet name="header" >
					<h:outputText value="#{messages['Regimen.months']}"  styleClass="collh" />
				</f:facet>
				<h:selectOneMenu value="#{it.item.duration}">
					<f:selectItem itemLabel="-" itemValue="#{null}"/>
					<f:selectItems value="#{sideEffectHome.months}" />
				</h:selectOneMenu>
			</h:column>
			
			<h:column >
				<f:facet name="header" >
					<h:outputText value="#{messages['global.comments']}"  styleClass="collh" style="width:410px"/>
				</f:facet>
				<h:inputText value="#{it.item.comment}" style="width:400px;display:none; "/>
			</h:column>
		</h:dataTable>
		</div>	
    </s:fragment>    

</td>
</tr>
</table>
</div>
		
</ui:composition>