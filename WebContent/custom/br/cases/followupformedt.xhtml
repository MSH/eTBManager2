<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:a="https://ajax4jsf.dev.java.net/ajax"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      template="/layout/template_new.xhtml">

<ui:param name="title" value="#{messages['Boletim de Acompanhamento']} - #{messages[tbcase.classification.key]}" />

<ui:param name="topmenu" value="0" />
<ui:param name="left" value="0" />

<ui:param name="labelstyle" value="width:150px" />
<script type="text/javascript" src="../js/util.js" />

<ui:define name="content">
<h1>#{title}</h1>
<h:form id="main" styleClass="form1">

<div>
	<div class="#{tbcase.patient.gender=='MALE'?'male-icon':'female-icon'}" style="float:left;"/>
	<div class="text-big">#{tbcase.patient.fullName}</div>
	<div class="text-medium">#{tbcase.displayCaseNumber}</div>
	<ui:insert name="casenumber" />
</div>

<div class="form-content">
	<h1 style="font-size:16px;coloe:#E47911;margin-bottom:0px">Dados do Caso</h1>
	<h2>#{messages['Alteração do Endereço e Telefone']}</h2>

	<table width="99%" style="border-collapse:collapse;">
    <tr><td colspan="2">
	
		<s:decorate template="/layout/display.xhtml">
    		<ui:define name="label">#{messages['Address.address']}:</ui:define>
    		#{tbcase.notifAddress.address}
    		<s:fragment rendered="#{not empty tbcase.notifAddressNumber}">
    			<h:outputText value=", #{tbcase.notifAddressNumber}" />
    		</s:fragment>
    		<s:fragment rendered="#{not empty tbcase.notifAddress.complement}">
    			<h:outputText value=", #{tbcase.notifAddress.complement}" />
    		</s:fragment> 
    		<br/>
		</s:decorate>
		
		<s:decorate template="/layout/display.xhtml">
			<ui:define name="label">#{messages['Address.district']}:</ui:define>
			#{tbcase.notifDistrict}
		</s:decorate>
		
		<s:decorate template="/layout/audisplay.xhtml">
			<ui:param name="adminunit" value="#{tbcase.notifAddress.adminUnit}" />
		</s:decorate>
	</td></tr>
   
    <tr><td colspan="2">
    	<s:fragment rendered="#{caseHome.managed}">
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:param name="labelstyle" value="width:400px;" />
    		<ui:define name="label">#{messages['TbCase.notifAddressChanged']}:</ui:define>
    		<h:selectOneMenu id="addrChanged" value="#{tbcase.notifAddressChanged}" >
    			<f:selectItem itemLabel="#{messages['global.no']}" itemValue="#{false}"/>
    			<f:selectItem itemLabel="#{messages['global.yes']}" itemValue="#{true}"/>
    		</h:selectOneMenu>
    	</s:decorate>

<rich:jQuery selector="#addrChanged" query="change(function(){ showCurrAddress(this); })" />
<rich:jQuery selector="#addrChanged" timing="onload" query="each(function(){ if (this.selectedIndex==0) jQuery('#curraddr').hide(); })" />
   	
    	<div id="curraddr" style="clear:both;">
    	
    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.address']}:</ui:define>
    		<h:inputText value="#{tbcase.currentAddress.address}" style="width:300px;margin-bottom:2px;" maxlength="100"/>
    		#{messages['pt_BR.addressNumber']}: <h:inputText value="#{tbcase.currAddressNumber}" style="width:80px;text-transform:uppercase;" maxlength="20"  />
    	</s:decorate>
   
	   	<s:decorate template="/layout/edit.xhtml"> 	
    		<ui:define name="label">#{messages['Address.complement']}</ui:define>
    		<h:inputText value="#{tbcase.currentAddress.complement}" style="width:300px" maxlength="100"/>
    	</s:decorate>

    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.district']}</ui:define>
    		<h:inputText value="#{tbcase.currDistrict}" style="width:150px;text-transform:uppercase;" maxlength="100"/>
    	</s:decorate>

    	<s:decorate template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['Address.zipCode']}</ui:define>
    		<h:inputText value="#{tbcase.currentAddress.zipCode}" maxlength="8" />
    	</s:decorate>
    	
    	<table width="100%" style="border-collapse: collapse;">
		<tr><td>
			<s:decorate template="/layout/auselection.xhtml">
				<ui:param name="auselection" value="#{caseEditingHome.currentAdminUnit}" />
			</s:decorate>
    	</td></tr>
    	</table>
    	
    	</div>
    	</s:fragment>
    </td></tr>
    
    <tr><td>
    <br/>
    	<s:decorate id="phone" template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbCase.phoneNumber']}:</ui:define>
    		<s:decorate styleClass="label">
			<s:label value="DDD" styleClass="over" />
   			<h:inputText id="dddphone" value="#{tbcase.prefixPhone}" style="width:50px;margin-right:4px;text-transform:uppercase;" maxlength="3"/>
    		<h:inputText value="#{tbcase.phoneNumber}" maxlength="50" style="text-transform:uppercase;"/>
    		</s:decorate>
    	</s:decorate>	
		<rich:jQuery selector="#phone .label label" query="labelOver('over');" />
	</td><td>
	<br/>
    	<s:decorate id="mobile" template="/layout/edit.xhtml">
    		<ui:define name="label">#{messages['TbCase.mobileNumber']}:</ui:define>
    		<s:decorate styleClass="label"> 
			<s:label value="DDD" styleClass="over" />
   			<h:inputText id="dddmobile" value="#{tbcase.prefixMobile}" style="width:50px;margin-right:4px;text-transform:uppercase;" maxlength="3"/>
    		<h:inputText value="#{tbcase.mobileNumber}" maxlength="50" style="text-transform:uppercase;"/>
    		</s:decorate>
    	</s:decorate>	
		<rich:jQuery selector="#mobile .label label" query="labelOver('over');" />
    </td></tr>

    </table>
    
</div>

<div class="form-content">
	<h1 style="font-size:16px;coloe:#E47911;margin-bottom:0px">Evolução do Caso</h1>
	<table>
		<tr>
			<td>
				<s:decorate template="/layout/edit.xhtml">
					<ui:define name="label">#{messages['pt_BR.ClinicalEvolution']}:</ui:define>
					<h:selectOneMenu value="#{medicalExaminationBR.clinicalEvolution}" required="true">
						<s:selectItems var="s" value="#{globalLists_br.clinicalEvolutions}" label="#{messages[s.key]}" noSelectionLabel="-" />
						<s:convertEnum />
					</h:selectOneMenu>
				</s:decorate>
			</td><td>
		    	<s:decorate template="/layout/edit.xhtml" >
		    		<ui:define name="label">#{messages['MedicalExamination.weight']}: <s:span style="color:red;">*</s:span></ui:define>
		    		<div id="edtweight">
		    		<h:inputText value="#{medicalExaminationBR.weight}" converter="localeDoubleConverter" 
		    			onkeypress="return numbersOnly(this,event, '#{timezones.decimalSeparator}');" 
		    			onkeyup="updateBMI(this, event);"
		    			style="width:80px;" >
		    			<f:validateDoubleRange maximum="500" minimum="1"/>
		    		</h:inputText>#{messages['MedicalExamination.weight.unit']}
		    		</div>
		    	</s:decorate>
			</td>
		</tr>
	</table>
	
	<br/>
	
	<h2>#{messages['cases.exammicroscopy']}</h2>
	<h:selectBooleanCheckbox id="exammicroscopy" value="#{followUpBRHome.examMicroscopy}" style="margin-left:50px"/>
	<b><h:outputText value="Não Realizado" /></b>
<rich:jQuery selector="#exammicroscopy" query="change(function(){ showDetails(this, '#exammicroscopydiv'); })" />
<rich:jQuery selector="#exammicroscopy" timing="onload" query="each(function(){  showDetails(this, '#exammicroscopydiv');  })" />

	<br/>

   	<div id="exammicroscopydiv" >
   	<table>
	   	<tr>
	   		<td>
			   	<s:decorate template="/layout/edit.xhtml" >
				 	<ui:define name="label">#{messages['cases.details.result']}:</ui:define>
				 	<ui:param name="redasterisk" value="true" />
				 	<h:selectOneMenu id="exammicroscpycbres" value="#{examMicroscopy.result}">
				 		<s:selectItems value="#{microscopyResults}" var="it" noSelectionLabel="-" label="#{messages[it.key]}" />
				 		<s:convertEnum />
				 	</h:selectOneMenu>
				</s:decorate>
	   		</td>
	   		<td>
		   		<s:decorate template="/layout/dateedit.xhtml" >
				 	<ui:define name="label">#{messages['PatientSample.dateCollected']}:</ui:define>
				 	<ui:param name="redasterisk" value="true" /> 
				 	<ui:param name="future" value="false" /> 
				 	<ui:param name="datefield" value="#{examMicroscopy.dateCollected}" />
				 	<ui:param name="edtid" value="exammicroscpydatecollected" />
				 </s:decorate>
	   		</td>
	   	</tr>
	   	<tr>
	   		<td>
			   	<s:decorate template="/layout/dateedit.xhtml" >
				 	<ui:define name="label">#{messages['cases.exams.dateRelease']}:</ui:define>
				 	<ui:param name="required" value="false" /> 
				 	<ui:param name="future" value="false" /> 
				 	<ui:param name="datefield" value="#{examMicroscopy.dateRelease}" /> 
				 </s:decorate>
	   		</td>
	   	</tr>
   	</table>
   	</div>
   	
   	<br/>
   
   	<h2>#{messages['cases.examculture']}</h2>
	<h:selectBooleanCheckbox id="examculture" value="#{followUpBRHome.examCulture}" style="margin-left:50px"/>
	<b><h:outputText value="Não Realizado" /></b>
<rich:jQuery selector="#examculture" query="change(function(){ showDetails(this, '#examculturediv'); })" />
<rich:jQuery selector="#examculture" timing="onload" query="each(function(){ showDetails(this, '#examculturediv'); })" />

	<br/>

   	<div id="examculturediv">
   	
   	<table>
   		<tr>
   			<td>
			    <s:decorate template="/layout/edit.xhtml" >
			    	<ui:define name="label">#{messages['cases.details.result']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" />
			    	<h:selectOneMenu id="examculturecbres" value="#{examCulture.result}">
			    		<s:selectItems value="#{cultureResults}" var="it" noSelectionLabel="-" label="#{messages[it.key]}" />
			    		<s:convertEnum />
			    	</h:selectOneMenu>
			    </s:decorate>
   			</td>
   			<td>
			    <s:decorate template="/layout/dateedit.xhtml" >
			    	<ui:define name="label">#{messages['PatientSample.dateCollected']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" /> 
			    	<ui:param name="future" value="false" /> 
			    	<ui:param name="datefield" value="#{examCulture.dateCollected}" />
			    	<ui:param name="edtid" value="examculturedatecollected" />
			    </s:decorate>   			
   			</td>
   		</tr>
   		<tr>
   			<td>
				<s:decorate template="/layout/dateedit.xhtml" >
				   	<ui:define name="label">#{messages['cases.exams.dateRelease']}:</ui:define>
				   	<ui:param name="edtid" value="dtrelease" />
				   	<ui:param name="required" value="false" /> 
				   	<ui:param name="future" value="false" /> 
				   	<ui:param name="datefield" value="#{examCulture.dateRelease}" />
				</s:decorate>   			
   			</td>
   			<td>
   			</td>   			
   		</tr>
   		<tr>
   			<td>
		   		<s:decorate template="/layout/labselection.xhtml" >
			    	<ui:param name="redasterisk" value="true" />
			    	<ui:param name="edtid" value="examculturelabselection" />
			    	<ui:param name="edtid2" value="examculturelabselection2" />
			    	<ui:param name="labselection" value="#{examCultureHome.labselection}" />
			    </s:decorate>
   			</td>
   			<td>
			    <s:decorate template="/layout/edit.xhtml" >
			    	<ui:define name="label">#{messages['cases.exams.method']}:</ui:define>
			    	<h:selectOneMenu value="#{examCulture.method}" required="false">
			    		<s:selectItems value="#{fieldsQuery.cultureMethods}" var="it" noSelectionLabel="-" label="#{it.name}" />
			    		<s:convertEntity />
			    	</h:selectOneMenu>
			    </s:decorate>   			
   			</td> 			
   		</tr>
   	</table>
   	</div>   	
   	
    <br/>
   
   	<h2>#{messages['pt_BR.MolecularBiology']}</h2>
	<h:selectBooleanCheckbox id="molecularbiology" value="#{followUpBRHome.molecularBiology}" style="margin-left:50px"/>
	<b><h:outputText value="Não Realizado" /></b>
<rich:jQuery selector="#molecularbiology" query="change(function(){ showDetails(this, '#molecularbiologydiv'); })" />
<rich:jQuery selector="#molecularbiology" timing="onload" query="each(function(){ showDetails(this, '#molecularbiologydiv'); })" />

	<br/>

   	<div id="molecularbiologydiv">
   	<table>
	   	<tr>
		   	<td colspan="2">
				<s:decorate template="/layout/edit.xhtml" >
			    	<ui:define name="label">#{messages['pt_BR.MolecularBiology.result']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" />
			    	<ui:param name="showPattern" value="false" />
			    	<h:selectOneMenu id="molecularbiologyresult" value="#{molecularBiology.result}">
			    		<s:selectItems value="#{molecularBiologyHome.resultOptions}" var="it" noSelectionLabel="-" label="#{messages[it.messageKey]}" />
			    		<s:convertEnum />
			    	</h:selectOneMenu>
			    </s:decorate>
		   	</td>
	   	</tr>
	   	<tr>
		   	<td>
				<s:decorate template="/layout/dateedit.xhtml" >
			    	<ui:define name="label">#{messages['PatientSample.dateCollected']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" /> 
			    	<ui:param name="showPattern" value="false" />
			    	<ui:param name="future" value="false" /> 
			    	<ui:param name="datefield" value="#{molecularBiology.date}" /> 
			    	<ui:param name="edtid" value="molecularbiologydatecollected" />
			    </s:decorate>
		   	</td>
		   	<td>
			    <s:decorate template="/layout/dateedit.xhtml" >
			    	<ui:define name="label">#{messages['cases.exams.dateRelease']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" /> 
			    	<ui:param name="future" value="true" /> 
			    	<ui:param name="edtid" value="edtMBreleasedate" /> 
			    	<ui:param name="datefield" value="#{molecularBiology.dateRelease}" />
			    	<ui:param name="edtid" value="molecularbiologydaterelease" /> 
			    </s:decorate>		   	
		   	</td>		   	
	   	</tr>
	   	<tr>
		   	<td colspan="2">
			    <s:decorate template="/layout/edit.xhtml" >
			    	<ui:define name="label">#{messages['cases.exams.method']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" />
			    	<h:selectOneMenu id="molecularbiologymethod" value="#{molecularBiology.method}">
			    		<s:selectItems value="#{fieldsQuery.molecularBiologyMethods}" var="it" noSelectionLabel="-" label="#{it.name}" />
			    		<s:convertEntity />
			    	</h:selectOneMenu>
			    </s:decorate>		   	
		   	</td>	   	
	   	</tr>
	   	<tr>
		   	<td colspan="2">
				<s:decorate template="/layout/labselection.xhtml" >
					<ui:param name="edtid" value="molecularbiologylabselection" />
					<ui:param name="edtid2" value="molecularbiologylabselection2" />
					<ui:param name="redasterisk" value="true" />
					<ui:param name="labselection" value="#{molecularBiologyHome.labselection}" />
				</s:decorate>	   	
		   	</td>
		</tr>	   	
   	</table>

   	</div>	
   
    <br/>
   
   	<h2>#{messages['cases.examdst']}</h2>
	<h:selectBooleanCheckbox id="examdst" value="#{followUpBRHome.examDst}" style="margin-left:50px"/>
	<b><h:outputText value="Não Realizado" /></b>
<rich:jQuery selector="#examdst" query="change(function(){ showDetails(this, '#examdstdiv'); })" />
<rich:jQuery selector="#examdst" timing="onload" query="each(function(){ showDetails(this, '#examdstdiv'); })" />

	<br/>
	
   	<div id="examdstdiv">
   	   	<rich:dataGrid value="#{examDSTHome.items}" var="it" columns="4" width="100%">
			<div style="font-size:12px">
				<h:outputText value="#{it.substance.name} (#{it.substance.abbrevName})" />
				<div style="display:inline;float:right;margin:0">
				<h:selectOneMenu id="res" value="#{it.result}" required="true" onchange="dstResultChange(this);">
	    			<s:selectItems value="#{dstResults}" var="ss" label="#{messages[ss.key]}" />
	    			<s:convertEnum />
				</h:selectOneMenu>
				</div>
			</div>
		</rich:dataGrid>
		<h:message for="examdst" styleClass="error"/>
		<br/><br/>
		<table>
			<tr>
				<td>
				    <s:decorate template="/layout/dateedit.xhtml" >
				    	<ui:define name="label">#{messages['PatientSample.dateCollected']}:</ui:define>
				    	<ui:param name="redasterisk" value="true" /> 
				    	<ui:param name="future" value="false" /> 
				    	<ui:param name="datefield" value="#{examDST.dateCollected}" />
				    	<ui:param name="edtid" value="examdstdatecollected" /> 
				    </s:decorate>				
				</td>
				<td>
				    <s:decorate template="/layout/dateedit.xhtml" >
				    	<ui:define name="label">#{messages['cases.exams.dateRelease']}:</ui:define>
				    	<ui:param name="required" value="false" /> 
				    	<ui:param name="future" value="false" /> 
				    	<ui:param name="datefield" value="#{examDST.dateRelease}" /> 
				    </s:decorate>				
				</td>				
			</tr>
			<tr>
				<td>
				    <s:decorate template="/layout/edit.xhtml" >
				    	<ui:define name="label">#{messages['cases.exams.method']}:</ui:define>
				    	<h:selectOneMenu value="#{examDST.method}" required="false">
				    		<s:selectItems value="#{fieldsQuery.DSTMethods}" var="it" noSelectionLabel="-" label="#{it.name}" />
				    		<s:convertEntity />
				    	</h:selectOneMenu>
				    </s:decorate>				
				</td>
				<td>
					<s:decorate template="/layout/labselection.xhtml" >
				    	<ui:param name="redasterisk" value="true" />
				    	<ui:param name="labselection" value="#{examDSTHome.labselection}" />
				    	<ui:param name="edtid" value="examdstlabselection" />
				    	<ui:param name="edtid2" value="examdstlabselection2" />
				    </s:decorate>
				</td>				
			</tr>			
		</table>

   	</div>
   	
    <br/>
   
   	<h2>#{messages['cases.examhiv']}</h2>
	<h:selectBooleanCheckbox id="examhiv" value="#{followUpBRHome.examHiv}" style="margin-left:50px"/>
	<b><h:outputText value="Não Realizado" /></b>
<rich:jQuery selector="#examhiv" query="change(function(){ showDetails(this, '#examhivdiv'); })" />
<rich:jQuery selector="#examhiv" timing="onload" query="each(function(){ showDetails(this, '#examhivdiv'); })" />

	<br/>
  	
   	<div id="examhivdiv">
   		<table>
   			<tr>
   				<td>
				     <s:decorate template="/layout/dateedit.xhtml" >
				    	<ui:define name="label">#{messages['cases.exams.dateRelease']}:</ui:define>
				    	<ui:param name="future" value="true" /> 
				    	<ui:param name="datefield" value="#{examHIV.date}" /> 
						<ui:param name="edtid" value="edtdate" /> 
						<ui:param name="redasterisk" value="true" />
						<ui:param name="edtid" value="examhivdaterelease" />
				    </s:decorate>   				
   				</td>
   				<td>
			   		<s:decorate template="/layout/edit.xhtml" >
				    	<ui:define name="label">#{messages['cases.details.result']}:</ui:define> 
						<ui:param name="redasterisk" value="true" /> 
				    	<h:selectOneMenu id="examhivresult" value="#{examHIV.result}" onchange="toggleYesNo(this.options[this.selectedIndex].value=='POSITIVE'?'0':'1', '#divpos')">
				    		<s:selectItems value="#{hivResults}" var="it" noSelectionLabel="-" label="#{messages[it.key]}" />
				    		<s:convertEnum />
				    	</h:selectOneMenu>
				    </s:decorate>
   				</td>   				
   			</tr>
   		</table>
   	</div>   
   		  	
    <br/>
   
   	<h2>#{messages['cases.examxray']}</h2>
	<h:selectBooleanCheckbox id="examxray" value="#{followUpBRHome.examXRay}" style="margin-left:50px"/>
	<b><h:outputText value="Não Realizado" /></b>
<rich:jQuery selector="#examxray" query="change(function(){ showDetails(this, '#examxraydiv'); })" />
<rich:jQuery selector="#examxray" timing="onload" query="each(function(){ showDetails(this, '#examxraydiv'); })" />

	<br/>
    	
   	<div id="examxraydiv">
   	<table>
   		<tr>
   			<td>
			    <s:decorate id="dt" template="/layout/dateedit.xhtml" >
			    	<ui:define name="label">#{messages['cases.details.date']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" /> 
			    	<ui:param name="future" value="true" /> 
			    	<ui:param name="datefield" value="#{examXRay.date}" /> 
			    	<ui:param name="showPattern" value="#{false}" /> 
			    	<ui:param name="edtid" value="examxraydate" />
			    </s:decorate>   			
   			</td>
   			<td>
			    <s:decorate template="/layout/edit.xhtml" >
			    	<ui:define name="label">#{messages['TbField.XRAYPRESENTATION']}:</ui:define>
			    	<ui:param name="redasterisk" value="true" />
			    	<ui:param name="labelstyle" value="width:210px" />
			    	<h:selectOneMenu id="examxraypresentation" value="#{examXRay.presentation}">
			    		<s:selectItems value="#{fieldsQuery.XRayPresentations}" var="it" noSelectionLabel="-" label="#{it.name}" />
			    		<s:convertEntity />
			    	</h:selectOneMenu>
			    </s:decorate>
   			</td>
   		</tr>
   		<tr>
   			<td colspan="2">
   				<s:decorate template="/layout/edit.xhtml" >
			    	<ui:define name="label">#{messages['XRayEvolution']}:</ui:define>
			    	<h:selectOneMenu value="#{examXRay.evolution}">
			    		<s:selectItems value="#{xrayEvolutions}" var="it" noSelectionLabel="-" label="#{messages[it.key]}" />
			    		<s:convertEnum />
			    	</h:selectOneMenu>
			    </s:decorate>
   			</td>  
   			<td>
   			</td> 			   			
   		</tr>
   	</table>
   	</div>


</div>


<div class="form-content">
	<h1 style="font-size:16px;coloe:#E47911;margin-bottom:0px">Tratamento</h1>
   
   	<h2>#{messages['cases.sideeffects']}</h2>
	<h:selectBooleanCheckbox id="sideeffects" value="#{followUpBRHome.sideEffects}" style="margin-left:50px"/>
	<b><h:outputText value="Nenhuma" /></b>
<rich:jQuery selector="#sideeffects" query="change(function(){ showDetails(this, '#sideeffectsdiv'); })" />
<rich:jQuery selector="#sideeffects" timing="onload" query="each(function(){ showDetails(this, '#sideeffectsdiv'); })" />

	<br/>
    	
   	<div id="sideeffectsdiv">
   		<rich:dataGrid value="#{sideEffectBRHome.items}" var="it" columns="4" width="100%">
			<div style="font-size:12px">
				<h:selectBooleanCheckbox id="sideeffectckbox" value="#{it.selected}" onclick="showMonth('month#{it.item.sideEffect.value.id}', this.checked)"/>
				<h:outputText value="#{it.item.sideEffect.value.name}" />
				<s:fragment rendered="#{it.item.sideEffect.value.other}">
					<div class="divother" style="display:inline">
						<h:outputText value=": " />
	    				<h:inputText value="#{it.item.sideEffect.complement}" style="width:180px"/>
	    			</div>
				</s:fragment>
				<br/>
				<div id="month#{it.item.sideEffect.value.id}" style="display:none">
					<s:decorate template="/layout/edit.xhtml" >
				    	<ui:define name="label">#{messages['cases.sideeffects.month']}:</ui:define>
				    	<ui:param name="redasterisk" value="true" />
				    	<ui:param name="labelstyle" value="width:140px" />
						<h:selectOneMenu value="#{it.item.month}">
							<f:selectItems value="#{sideEffectHome.months}" />
						</h:selectOneMenu>
				    </s:decorate>
				</div>
			</div>
		</rich:dataGrid>
		<h:message for="sideeffects" styleClass="error"/>
   	</div>
   	
   	<br/>
	
	<h2 >#{messages['pt_BR.supervisedTreatment']}</h2>
	<table>
		<tr>
			<td>
				<s:decorate id="templatecbsuptreatment" template="/layout/edit.xhtml">
					<ui:define name="label">#{messages['pt_BR.supervisedTreatment']}:</ui:define>
					<ui:param name="labelstyle" value="width:200px" />
					<h:selectOneMenu id="cbsuptreatment" forceId="true" value="#{medicalExaminationBR.supervisedTreatment}" required="true">
						<s:selectItems var="s" value="#{globalLists.yesNoTypeList}" label="#{messages[s.key]}" noSelectionLabel="-" />
						<s:convertEnum />
					</h:selectOneMenu>
				</s:decorate>
			</td>
			<td>
				<div id="div_supunit">
				<s:decorate id="templatesupervisionunit" template="/layout/edit.xhtml">
					<ui:param name="labelstyle" value="width:160px" />
					<ui:define name="label">#{messages['pt_BR.supervisionUnit']}:</ui:define>
					<h:inputText id="supervisionunit" value="#{medicalExaminationBR.supervisionUnitName}" style="width:300px;text-transform:uppercase;" maxlength="100" />
				</s:decorate>
				</div>			
			</td>
		</tr>
	</table>
<script type="text/javascript">
<!--
	document.getElementById("main:templatesupervisionunit:supervisionunit").value='#{tbcase.supervisionUnitName}';
	if('#{tbcase.getSupervisionUnitName()}' != '')
		document.getElementById("main:templatecbsuptreatment:cbsuptreatment")[1].selected = true;
-->
</script>
<rich:jQuery selector="#cbsuptreatment" query="change(function(){showSupUnit(this); })" />
<rich:jQuery selector="#cbsuptreatment" timing="onload" query="each(function(){ showSupUnit(this,true); })" />

	<br/>
	
	<h2 style="display:inline">Alteração no Esquema Terapêutico</h2>
	
	<s:decorate id="templatecbschemamod" template="/layout/edit.xhtml">
		<ui:define name="label">Houve alteração no esquema terapêutico?</ui:define>
		<ui:param name="labelstyle" value="width:290px" />
		<h:selectOneMenu id="cbschemamod" forceId="true" value="#{followUpBRHome.schemaModification}" required="true">
			<s:selectItems var="s" value="#{globalLists.yesNoTypeList}" label="#{messages[s.key]}" noSelectionLabel="-" />
			<s:convertEnum />
		</h:selectOneMenu>
	</s:decorate>
	
	<div id="div_schemamod">
		<span class="hint">Após salvar este formulário, você será redirecionado para uma página onde poderá realizar as modificações.</span>
	</div>
	
	<rich:jQuery selector="#cbschemamod" query="change(function(){showSchemaMod(this); })" />
	<rich:jQuery selector="#cbschemamod" timing="onload" query="each(function(){ showSchemaMod(this,true); })" />
	
	<br/>
   	
   	<h2>#{messages['cases.move']}</h2>
	<h:selectBooleanCheckbox id="movecase" value="#{followUpBRHome.moveCase}" style="margin-left:50px"/>
	<b><h:outputText value="Não Transferir" /></b>
<rich:jQuery selector="#movecase" query="change(function(){ showDetails(this, '#movecasediv'); })" />
<rich:jQuery selector="#movecase" timing="onload" query="each(function(){ showDetails(this, '#movecasediv'); })" />

	<br/>
    	
   	<div id="movecasediv">
   	
	    <s:decorate template="/layout/tbselection.xhtml" >
	    	<ui:define name="label">#{messages['patients.desthu']}:</ui:define>
	    	<ui:param name="tbunitselection" value="#{caseMoveHome.tbunitselection}" />
	    	<ui:param name="labelstyle" value="width:160px" /> 
	    	<ui:param name="redasterisk" value="true" />
	    	<ui:param name="idcbselau" value="casemovecbselau" />
	    	<ui:param name="idcbunits" value="casemovecbunits" />
	    </s:decorate>
	    
	    <s:decorate template="/layout/dateedit.xhtml" >
	    	<ui:define name="label">#{messages['cases.movdate']}:</ui:define>
	    	<ui:param name="future" value="false" /> 
	    	<ui:param name="labelstyle" value="width:160px" /> 
	    	<ui:param name="datefield" value="#{caseMoveHome.moveDate}" /> 
	    	<ui:param name="redasterisk" value="true" />
	    	<ui:param name="edtid" value="transferdate" />
	    </s:decorate>
	    
   	</div>

</div>

<div class="form-content">
	<h1 style="font-size:16px;coloe:#E47911;margin-bottom:0px">#{messages['CaseState']}</h1>
   
   <s:decorate template="/layout/dateedit.xhtml" >
		<ui:define name="label">#{messages['TbCase.outcomeDate']}:</ui:define>
    	<ui:param name="redasterisk" value="true" /> 
    	<ui:param name="future" value="false" /> 
    	<ui:param name="datefield" value="#{caseCloseHomeBR.date}" /> 
    	<ui:param name="edtid" value="casestatedate" /> 
    </s:decorate>
	
    <s:decorate template="/layout/edit.xhtml" >
		<ui:define name="label">#{messages['CaseState']}:</ui:define>
		<h:selectOneRadio id="selstate" value="#{followUpBRHome.state}" required="true" layout="pageDirection">
			<s:selectItems value="#{followUpBRHome.caseStates}" var="v" label="#{messages[v.key]}"/>
			<s:convertEnum />
		</h:selectOneRadio>
    </s:decorate>
    
<rich:jQuery selector="#selstate input[type=radio]" query="click(function(){statecheckClick(this);})" />

    <div id="regchanged" style="display:none">
    <s:decorate template="/layout/edit.xhtml" >
		<ui:define name="label">#{messages['TbField.SCHEMA_TYPES']}:</ui:define>
		<h:selectOneMenu value="#{tbcase.outcomeRegimenChanged}" >
			<s:selectItems value="#{fieldsQuery.schemaTypes}" var="v" label="#{v}"/>
			<s:convertEntity />
		</h:selectOneMenu>
    </s:decorate>
    </div>
    
    <div id="restype" style="display:none">
    <s:decorate template="/layout/edit.xhtml" >
		<ui:define name="label">#{messages['DrugResistanceType']}:</ui:define>
		<h:selectOneMenu value="#{tbcase.outcomeResistanceType}">
			<s:selectItems value="#{drugResistanceTypes}" var="v" label="#{messages[v.key]}"/>
			<s:convertEnum />
		</h:selectOneMenu>
    </s:decorate>
    </div>

	<div id="comments" style="display:none;clear:both;" >
    <s:decorate template="/layout/edit.xhtml" >
		<ui:define name="label">#{messages['TbCase.otherOutcome']}:</ui:define>
		<h:inputText value="#{caseCloseHomeBR.comment}" maxlength="100" style="width:300px;"/>
    </s:decorate>
    </div>

</div>

<div class="form-content">
	<h1 style="font-size:16px;coloe:#E47911;margin-bottom:0px">Outras Informações</h1>
	
    <s:decorate template="/layout/edit.xhtml">
    	<h:inputTextarea value="#{medicalExaminationBR.comments}" style=" width : 974px;height:80px;" />
    </s:decorate>
    <table>
    	<tr>
    		<td>
			    <s:decorate template="/layout/dateedit.xhtml" >
			    	<ui:define name="label">#{messages['cases.details.date']}:</ui:define>
			    	<ui:param name="required" value="true" /> 
			    	<ui:param name="future" value="true" /> 
			    	<ui:param name="datefield" value="#{medicalExaminationBR.date}" /> 
			    	<ui:param name="edtid" value="date" /> 
			    </s:decorate>    		
    		</td>
    		<td>
			    <s:decorate template="/layout/dateedit.xhtml" >
			    	<ui:define name="label">#{messages['MedicalExaminationBR.nextAppointment']}:</ui:define>
			    	<ui:param name="required" value="true" /> 
			    	<ui:param name="datefield" value="#{medicalExaminationBR.nextAppointment}" /> 
			    </s:decorate>    		
    		</td>    		
    	</tr>
    </table>
    
	<s:decorate template="/layout/edit.xhtml" >
    	<ui:define name="label">#{messages['MedicalExamination.responsible']}:</ui:define>
    	<h:inputText value="#{medicalExaminationBR.responsible}"
    		required="true" 
    		style=" width : 340px;text-transform:uppercase;" 
    		maxlength="100"/>
    </s:decorate>

	<s:decorate template="/layout/edit.xhtml" >
    	<ui:define name="label">#{messages['MedicalExamination.positionResponsible']}:</ui:define>
    	<h:inputText value="#{medicalExaminationBR.positionResponsible}"
    		required="true" 
    		style=" width : 340px;text-transform:uppercase;" 
    		maxlength="100"/>
    </s:decorate>
</div>


<div class="form-footer">
<div style="float:right;">
	<span style="color:red;">*</span> #{messages['javax.faces.component.UIInput.REQUIRED']}
</div>
<a:commandLink action="#{followUpBRHome.save}" styleClass="button" reRender="main,messages"
	onclick="if (!disableButton(this)) return false;" >
	<span>#{messages['form.save']}</span>
</a:commandLink>
<s:link view="/cases/casedata.xhtml" styleClass="button-alt" propagation="end" onclick="disableButton(this)">
	<f:param name="id" value="#{caseHome.id}" />
	<span>#{messages['form.cancel']}</span>
</s:link>
</div>
	
</h:form>
<script type="text/javascript">
<!--
function showDetails(cb, div){
	  if (!cb.checked)
	  	   jQuery(div).show(500);
	  else jQuery(div).hide(500);
}
	
function showSupUnit(cb, immediate) {
	  if (cb.selectedIndex == 1)
		   jQuery('#div_supunit').slideDown(immediate?0:500)
	  else jQuery('#div_supunit').slideUp(immediate?0:500);
}

function showMonth(divid, ck){
	if(ck)
		document.getElementById(divid).style.display = 'inline';
	else
		document.getElementById(divid).style.display = 'none';
	
}
function showCurrAddress(cb) {
	  if (cb.selectedIndex == 0)
	  	jQuery('#curraddr').hide(500);
	  else jQuery('#curraddr').show(500);
}
function statecheckClick(elem) {
	   if (elem.value=='OTHER')
	      jQuery('#comments').show(500);
	   else jQuery('#comments').hide(500);

	   if (elem.value=='MDR_CASE')
		   jQuery('#restype').show(500);
	   else jQuery('#restype').hide(500);

	   if (elem.value=='REGIMEN_CHANGED')
		   jQuery('#regchanged').show(500);
	   else jQuery('#regchanged').hide(500);
	}
function showSchemaMod(cb, immediate) {
	  if (cb.selectedIndex == 1)
		   jQuery('#div_schemamod').slideDown(immediate?0:500)
	  else jQuery('#div_schemamod').slideUp(immediate?0:500);
}
-->
</script>

</ui:define>

</ui:composition>  
