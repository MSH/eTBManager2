<?xml version="1.0" encoding="UTF-8"?> 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
 	  			xmlns:a="https://ajax4jsf.dev.java.net/ajax"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:rich="http://richfaces.ajax4jsf.org/rich">
                 
	<s:decorate template="/layout/roundrect.xhtml" style="margin:4px;">
		<ui:define name="header">
			<s:link value="#{messages['form.edit']}" view="/cases/caseedt.xhtml" style="float:right;" rendered="#{caseHome.canEdit}">
				<f:param name="id" value="#{caseHome.id}" />
			</s:link>
			<b style="text-transform:uppercase;">#{messages['cases.patientdata']}</b>
		</ui:define>
		<ui:param name="showfooter" value="0" />
	
	<div>	
	<table style="border-collapse:collapse;width:99%;" ><tr><td colspan="2">
	
	</td></tr>
	<tr><td>
	
	<s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['Patient.securityNumber']}:</ui:define>
		#{tbCase.patient.securityNumber}
	</s:decorate>
	
	</td><td>
	
	<s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['pt_BR.numsinan']}:</ui:define>
		#{messages[caseDataBR.numSinan]}
	</s:decorate>
	
	</td></tr>
	<tr><td>

	<s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['Gender']}:</ui:define>
		#{messages[tbCase.patient.gender.key]}
	</s:decorate>
	
	</td></tr>
	<tr><td>
	
	<s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['Patient.birthDate']}:</ui:define>
    	<h:outputText id="dt" value="#{tbCase.patient.birthDate}" converter="localeDateConverter"/>
	</s:decorate>
	
	</td><td>
	
	<s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['TbCase.patientAge']}:</ui:define>
    	<h:outputText value="#{tbCase.patientAge}" style="padding-right:4px;" />#{messages['global.age']}
	</s:decorate>

	</td></tr>
    <tr><td colspan="2">

		<s:decorate template="/layout/display.xhtml" rendered="#{not empty tbCase.patient.motherName}">
    		<ui:define name="label">#{messages['Patient.motherName']}:</ui:define>
    		#{tbCase.patient.motherName}
    	</s:decorate>
    </td></tr>
    <tr><td>
		<s:decorate template="/layout/display.xhtml" rendered="#{tbCase.nationality != null}">
    		<ui:define name="label">#{messages['Nationality']}:</ui:define>
    		<h:outputText value="#{messages[tbCase.nationality.key]}" />
		</s:decorate>
    </td><td>
		<s:decorate template="/layout/display.xhtml" rendered="#{tbCase.nationality == 'FOREIGN'}">
    		<ui:define name="label">#{messages['pt_BR.country']}:</ui:define>
    		<h:outputText value="#{caseDataBR.country}" />
		</s:decorate>
    </td></tr>
    <s:fragment rendered="#{not tbCase.notifAddress.emptyy}">
    <tr><td colspan="2">
    	<div class="paragraph">#{messages['cases.details.addressnotif']}</div>
	
		<s:decorate template="/layout/display.xhtml">
    		<ui:define name="label"><div style="height:34px;">#{messages['Address.address']}:</div></ui:define>
    		#{tbCase.notifAddress.address}
    		<s:fragment rendered="#{not empty caseDataBR.notifAddressNumber}">
    			<h:outputText value=", #{caseDataBR.notifAddressNumber}" />
    		</s:fragment> 
    		<br/>
    		#{tbCase.notifAddress.complement}
		</s:decorate>
		
		<s:decorate template="/layout/display.xhtml">
			<ui:define name="label">#{messages['Address.district']}:</ui:define>
			#{caseDataBR.notifDistrict}
		</s:decorate>
		
		<s:decorate template="/layout/audisplay.xhtml">
			<ui:param name="adminunit" value="#{tbCase.notifAddress.adminUnit}" />
		</s:decorate>
	</td></tr>
	<tr><td>
		<s:decorate template="/layout/display.xhtml" rendered="#{not empty tbCase.mobileNumber}">
    		<ui:define name="label">#{messages['TbCase.phoneNumber']}:</ui:define>
    		<h:outputText value="#{caseDataBR.prefixPhone} - " rendered="#{not empty caseDataBR.prefixPhone}"/> 
    		#{tbCase.phoneNumber}
		</s:decorate>
	</td>
	<td>
		<s:decorate template="/layout/display.xhtml" rendered="#{not empty tbCase.mobileNumber}">
    		<ui:define name="label">#{messages['TbCase.mobileNumber']}:</ui:define>
    		<h:outputText value="#{caseDataBR.prefixMobile} - " rendered="#{not empty caseDataBR.prefixMobile}"/> 
    		#{tbCase.mobileNumber}
		</s:decorate>
	</td></tr>
	</s:fragment>
	<s:fragment rendered="#{tbCase.notifAddressChanged}">
	<tr><td colspan="2">
		<div class="paragraph">#{messages['cases.details.addresscurr']}</div>
	
		<s:decorate template="/layout/display.xhtml">
    		<ui:define name="label"><div style="height:34px;">#{messages['Address.address']}:</div></ui:define>
    		#{tbCase.currentAddress.address}
    		<s:fragment rendered="#{not empty caseDataBR.currAddressNumber}">
    			<b>#{messages['pt_BR.addressNumber']}:</b> <h:outputText value="#{caseDataBR.currAddressNumber}}" />
    		</s:fragment> 
    		<br/>
    		#{tbCase.currentAddress.complement}
		</s:decorate>
		
		<s:decorate template="/layout/display.xhtml">
			<ui:define name="label">#{messages['Address.district']}:</ui:define>
			#{caseDataBR.currDistrict}
		</s:decorate>

		<s:decorate template="/layout/audisplay.xhtml">
			<ui:param name="adminunit" value="#{tbCase.currentAddress.adminUnit}" />
		</s:decorate>
	</td></tr>
	<tr><td>
		<s:decorate template="/layout/display.xhtml" rendered="#{not empty tbCase.phoneNumber}">
    		<ui:define name="label">#{messages['TbCase.phoneNumber']}:</ui:define>
    		#{tbCase.phoneNumber}
		</s:decorate>
	</td>
	<td>
		<s:decorate template="/layout/display.xhtml" rendered="#{not empty tbCase.mobileNumber}">
    		<ui:define name="label">#{messages['TbCase.mobileNumber']}:</ui:define>
    		#{tbCase.mobileNumber}
		</s:decorate>
	</td></tr>
	</s:fragment>
	</table></div>
	</s:decorate>
	

                 
	<s:decorate template="/layout/roundrect.xhtml" style="margin:4px;margin-top:10px;">
		<ui:define name="header">
			<b style="text-transform:uppercase;">#{messages['cases.generaldata']}</b>
		</ui:define>
		<ui:param name="showfooter" value="0" />
	
	<div>
	<table style="border-collapse:collapse;width:98%;" cellpadding="1" >
	<tr><td colspan="2">
		<s:decorate template="/layout/display.xhtml">
			<ui:define name="label"><div style="height:32px">#{messages['pt_BR.usOrigem']}:</div></ui:define>
			<h:outputText value="#{caseDataBR.usOrigem}" style="display:block;height:20px" />
			<ui:repeat value="#{caseDataBR.adminUnitUsOrigem.parents}" var="it">
				<span class="right-icon">#{it.name}</span>
			</ui:repeat>
		</s:decorate>
		
	</td></tr>
	<tr><td colspan="2">
	<s:decorate template="/layout/display.xhtml" rendered="#{tbCase.notificationUnit!=null}">
    	<ui:define name="label"><div style="height:32px"> #{messages['cases.details.notifhu']}:</div></ui:define>
    		<h:outputText value="#{tbCase.notificationUnit.name}" style="display:block;height:20px;"/> 
			<ui:repeat value="#{tbCase.notificationUnit.adminUnit.parents}" var="it">
				<span class="right-icon">#{it.name}</span>
			</ui:repeat>
	</s:decorate>

	</td></tr>
	<tr><td>
	<s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['TbCase.registrationDate']}:</ui:define>
    	<h:outputText id="dt" value="#{tbCase.registrationDate}" converter="localeDateConverter"/>
	</s:decorate>
	
	</td><td>
	<s:decorate id="dt" template="/layout/display.xhtml" rendered="#{not empty tbCase.treatmentPeriod.iniDate}">
    	<ui:define name="label">#{messages['TbCase.iniTreatmentDate']}:</ui:define>
    	<h:outputText id="dt" value="#{tbCase.treatmentPeriod.iniDate}" converter="localeDateConverter"/>
	</s:decorate>
	</td></tr>
	
	<tr><td	colspan="2">

		<s:decorate template="/layout/display.xhtml" rendered="#{tbCase.patientType!=null}">
    		<ui:define name="label">#{messages['PatientType']}:</ui:define>
    		#{messages[tbCase.patientType.key]}
    		<s:fragment rendered="#{not empty tbCase.patientTypeOther}">
    			<h:outputText value="#{tbCase.patientTypeOther}" styleClass="right-icon" style="margin-left:16px;"/>
    		</s:fragment>
    		<s:fragment rendered="#{tbCase.patientType=='SCHEMA_CHANGED'}">
    			<h:outputText value="#{caseDataBR.schemaChangeType}" styleClass="right-icon" style="margin-left:16px;"/>
    		</s:fragment>
    		<s:fragment rendered="#{tbCase.classification=='MDRTB_DOCUMENTED'}">
    			<h:outputText value="#{caseDataBR.resistanceType}" styleClass="right-icon" style="margin-left:16px;"/>
    		</s:fragment>
		</s:decorate>
		
		<s:decorate template="/layout/display.xhtml" rendered="#{not empty tbCase.infectionSite}">
    		<ui:define name="label">#{messages['InfectionSite']}:</ui:define>
    		#{messages[tbCase.infectionSite.key]}
		</s:decorate>

		<s:decorate template="/layout/display.xhtml" rendered="#{tbCase.pulmonaryType!=null}">
    		<ui:define name="label">#{messages['TbField.PULMONARY_TYPES']}:</ui:define>
    		#{tbCase.pulmonaryType}
		</s:decorate>

		<s:decorate template="/layout/display.xhtml" rendered="#{tbCase.extrapulmonaryType!=null}">
    		<ui:define name="label">#{messages['TbField.EXTRAPULMONARY_TYPES']}:</ui:define>
    		#{tbCase.extrapulmonaryType} <h:outputText value="/ #{tbCase.extrapulmonaryType2}" />
		</s:decorate>

		<s:fragment rendered="#{not empty prevTBTreatmentHome.items}">
		<div class="paragraph">#{messages['cases.prevtreat']}</div>
		<table width="98%" class="tabela4">
			<tr>
				<th rowspan="2">#{messages['cases.prevtreat.num']}
				</th>
				<th rowspan="2">#{messages['cases.prevtreat.date']}
				</th>
				<th colspan="#{prevTBTreatmentHome.substances.size}">
					#{messages['cases.prevtreat.meds']}
				</th>
				<th rowspan="2">#{messages['PrevTBTreatment.outcome']}
				</th>
			</tr>
			<tr>
			<a:repeat value="#{prevTBTreatmentHome.substances}" var="s">
				<th>#{s.abbrevName}
				</th>
			</a:repeat>
			</tr>
		<a:repeat value="#{prevTBTreatmentHome.items}" var="it">
			<tr>
				<td class="colcb">#{it.index}
				</td>
				<td class="colcb">
					#{it.prevTBTreatment.month+1}/#{it.prevTBTreatment.year}
				</td>
				<a:repeat value="#{it.items}" var="sub">
				<td class="colcb">
					<h:outputText value="x" rendered="#{sub.selected}" />
				</td>
				</a:repeat>
				<td class="colcb">
					#{messages[it.prevTBTreatment.outcome.key]}
				</td>
			</tr>
		</a:repeat>
		</table>
		</s:fragment>

    	<s:decorate template="/layout/display.xhtml" style="padding-top:4px;">
    		<ui:define name="label">#{messages['DrugResistanceType']}:</ui:define>
    		#{caseDataBR.tipoResistencia.message}
    	</s:decorate>

	</td></tr>
	</table></div>
	</s:decorate>

	<s:decorate template="/layout/roundrect.xhtml" style="margin:4px;">
		<ui:define name="header">
			<b style="text-transform:uppercase;">#{messages['cases.details.otherinfo']}</b>
		</ui:define>
		<ui:param name="showfooter" value="0" />

	<div><table width="99%" style="border-collapse:collapse;">
	<tr><td style="padding-bottom:10px;">

    <s:decorate template="/layout/displayfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.SKINCOLOR']}:</ui:define>
    	<ui:param name="field" value="#{caseDataBR.skinColor}" />
    </s:decorate>
	
    <s:decorate template="/layout/displayfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.POSITION']}:</ui:define>
    	<ui:param name="field" value="#{caseDataBR.position}" />
    </s:decorate>

    <s:decorate template="/layout/display.xhtml" >
    	<ui:define name="label">#{messages['TbField.PREGNANCE_PERIOD']}:</ui:define>
    	<h:outputText value="#{caseDataBR.pregnancePeriod.name}" />
    </s:decorate>

    <s:decorate template="/layout/displayfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.EDUCATIONAL_DEGREE']}:</ui:define>
    	<ui:param name="field" value="#{caseDataBR.educationalDegree}" />
    </s:decorate>
	
    <s:decorate template="/layout/displayfield.xhtml" >
    	<ui:define name="label">#{messages['TbField.CONTAG_PLACE']}:</ui:define>
    	<ui:param name="field" value="#{caseDataBR.contagPlace}" />
    </s:decorate>
    
    </td></tr></table></div>
    </s:decorate>
    
</ui:composition>
