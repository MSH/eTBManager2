<!-- <?xml version="1.0" encoding="UTF-8"?> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:m="http://jboss.com/products/seam/mail"
                xmlns:f="http://java.sun.com/jsf/core">
 <m:message>
    <m:from name="e-TB Manager" address="#{etbmanagerApp.configuration.systemMail}" />
    <m:to name="System Administrator" >#{etbmanagerApp.configuration.adminMail} </m:to>
    <m:subject>Error #{systemErrorDispatcher.errorLog.id} - #{systemErrorDispatcher.errorLog.exceptionMessage}</m:subject>

    <m:body>
        <html>
            <body style="font-family: tahoma,arial;font-size:11px;">
            	<table width="100%" style="border:2px solid black;font-size:12px;">
            	<tr>
            		<td colspan="2" style="background-color:black;font-size:18px;padding:4px;color:white;">
            			e-TB Manager - #{messages['error.title']}
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			Date-time:
            		</td>
            		<td>
            			<h:outputText value="#{systemErrorDispatcher.errorLog.errorDate}" >
            				<f:convertDateTime type="both"/>
            			</h:outputText>
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			URL:
            		</td>
            		<td>
            			<h:outputText value="#{systemErrorDispatcher.errorLog.url}" />
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			#{messages['User']}:
            		</td>
            		<td>
            			<h:outputText value="(#{systemErrorDispatcher.errorLog.userId}) #{systemErrorDispatcher.errorLog.user}"/>
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			#{messages['Workspace']}:
            		</td>
            		<td>
            			<h:outputText value="#{systemErrorDispatcher.errorLog.workspace}"/>
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			Exception:
            		</td>
            		<td>
            			<h:outputText value="#{systemErrorDispatcher.errorLog.exceptionClass}" />
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			Exception message:
            		</td>
            		<td>
            			<h:outputText value="#{systemErrorDispatcher.errorLog.exceptionMessage}"/>
            		</td>
            	</tr>
            	<tr>
            		<td style="background-color: #e0e0e0;font-weight:bold;">
            			Stack Trace:
            		</td>
            		<td>
            			<h:outputText value="#{systemErrorDispatcher.errorLog.stackTrace}" 
            			    converter="rmemoria.TextConverter" escape="false" style="font-family:Courier new"/>
            		</td>
            	</tr>
            	</table>
            
            <p/>
        </body>
        </html>
    </m:body>
</m:message>
      
</ui:composition>
