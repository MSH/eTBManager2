<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:a="https://ajax4jsf.dev.java.net/ajax"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      template="#{workspaceViewService.templateMedPage}">

<ui:param name="title" value="#{messages.medicines}" />
<ui:param name="waitdlg" value="1" />
<ui:param name="topmenu" value="1" />
<ui:param name="labelstyle" value="width:180px;" />

<ui:define name="body">
<div>

	<h:form>
    <s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['HealthSystem']}:</ui:define>
    	#{userSession.tbunit.healthSystem.name}
    </s:decorate>
    
    <s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">#{messages['Tbunit.address']}:</ui:define>
    	#{userSession.tbunit.address}
    </s:decorate>
    
	<s:decorate template="/layout/audisplay.xhtml">
		<ui:param name="adminunit" value="#{userSession.tbunit.adminUnit}" />
	</s:decorate>

	<s:fragment rendered="#{userSession.medicineManagementStarted}">

    <s:decorate template="/layout/display.xhtml">
    	<ui:define name="label">
			#{messages['Tbunit.medManStartDate']}:
		</ui:define>
		<h:outputText value="#{userSession.tbunit.medManStartDate}" converter="localeDateConverter" />
	</s:decorate>

	<s:fragment rendered="#{userSession.tbunit.treatmentHealthUnit}">
    <s:decorate template="/layout/display.xhtml">
		<div class="star-icon" >
			#{messages['Tbunit.treatmentHealthUnit']}
		</div>
	</s:decorate>
    <s:decorate template="/layout/display.xhtml" rendered="#{userSession.tbunit.notifHealthUnit}">
		<div class="star-icon" >
			#{messages['TbCase.notificationUnit']}
		</div>
	</s:decorate>
    <s:decorate template="/layout/display.xhtml" rendered="#{userSession.tbunit.tbHealthUnit}">
		<div class="star-icon" >
		#{messages['Tbunit.tbHealthUnit']}
		</div>
	</s:decorate>
    <s:decorate template="/layout/display.xhtml" rendered="#{userSession.tbunit.mdrHealthUnit}">
		<div class="star-icon" >
			#{messages['Tbunit.mdrHealthUnit']}
		</div>
	</s:decorate>
	</s:fragment>
	
    <span class="paragraph">#{messages['admin.tbunits.medmanagement']}</span>
    <s:decorate template="/layout/display.xhtml" rendered="#{userSession.tbunit.medicineStorage}">
		<div class="star-icon" >
			#{messages['Tbunit.medicineStorage']}
		</div>
	</s:decorate>
    <s:decorate template="/layout/display.xhtml" rendered="#{userSession.tbunit.receivingFromSource}">
		<div class="star-icon" >
		#{messages['Tbunit.receivingFromSource']}
		</div>
	</s:decorate>
	
	<div class="link-bar">
		<a:commandLink value="#{messages['medicines.start.remove']}" 
			action="#{medicineManStartHome.cancelMedicineManagement}" 
			reRender="main"
			styleClass="right-icon"
			rendered="#{s:hasRole('MED_INIT')}"
			onclick="if (!confirm('#{messages['medicines.start.removeconfirm']}')) {return false};" />
	</div>
	
	</s:fragment>

	<s:fragment rendered="#{not userSession.medicineManagementStarted}">
		<h:outputText value="#{messages['medicines.start.notstarted']}" styleClass="warn warn-icon"/>
		<p/>
		<s:link value="#{messages['medicines.start']}" view="/medicines/start.xhtml" 
			styleClass="right-icon" 
			rendered="#{s:hasRole('MED_INIT')}"/>
	</s:fragment>

	<p/>
	</h:form>
</div>
</ui:define>

</ui:composition>  
